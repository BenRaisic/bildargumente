import{_ as Vt}from"../chunks/preload-helper.41c905a7.js";import{S as Ie,i as we,s as Ee,k as L,q as Q,a as X,l as N,m as C,r as Z,h as m,c as H,n as p,b as P,G as O,u as _e,H as Y,I as se,o as Je,R as le,L as Le,M as J,T as We,N as Se,j as St,U as Tt,e as W,J as Te,V as Me,W as ze,w as ye,K as Oe,g as B,v as oe,d as F,f as fe,y as he,z as me,A as pe,B as ge,X as ke,Y as ve,Z as Ce,_ as Bt,O as Ft,p as Gt}from"../chunks/index.7c5e5199.js";import{b as ue,m as Ut,e as Wt,t as Ne,a as Ge,i as Ye,c as Xt}from"../chunks/setup.158a0fb1.js";import{w as be,e as Ht}from"../chunks/singletons.3a23b49c.js";import{p as Jt}from"../chunks/stores.6ff50cc7.js";const Yt=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/template.md":()=>Vt(()=>import("../chunks/template.82fa4da5.js"),["../chunks/template.82fa4da5.js","../chunks/index.7c5e5199.js"],import.meta.url)}));return await Promise.all(e.map(async([t,s])=>{const n=await s(),{html:a}=n.default.render(),r=t.slice(17,-3),o=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,c=[...a.matchAll(o)].map(u=>u[2]).filter(u=>!u.startsWith("http")).map(u=>{const f=u.lastIndexOf("/");return f!==-1?u.substring(f+1):u});return{meta:n.metadata,path:r,text:a,links:c}}))},Qt=async({fetch:i})=>({posts:await(await i("/api/posts")).json()}),Zt=async()=>(await Yt()).sort().map(l=>({slug:l.path.replaceAll("/","")})),Zl=Object.freeze(Object.defineProperty({__proto__:null,entries:Zt,load:Qt},Symbol.toStringTag,{value:"Module"})),Xe=be(""),Ve=be(""),Pe=be(!1),Qe=be([]),de=be([]),Ae=be([]),qe=be(0);function Ze(i){var s;let e,l=((s=i[0].meta)==null?void 0:s.description)+"",t;return{c(){e=L("div"),t=Q(l),this.h()},l(n){e=N(n,"DIV",{class:!0});var a=C(e);t=Z(a,l),a.forEach(m),this.h()},h(){p(e,"class","description svelte-10gblkc")},m(n,a){P(n,e,a),O(e,t)},p(n,a){var r;a&1&&l!==(l=((r=n[0].meta)==null?void 0:r.description)+"")&&_e(t,l)},d(n){n&&m(e)}}}function Re(i){let e,l=i[0].meta.author+"",t;return{c(){e=L("div"),t=Q(l),this.h()},l(s){e=N(s,"DIV",{class:!0});var n=C(e);t=Z(n,l),n.forEach(m),this.h()},h(){p(e,"class","author svelte-10gblkc")},m(s,n){P(s,e,n),O(e,t)},p(s,n){n&1&&l!==(l=s[0].meta.author+"")&&_e(t,l)},d(s){s&&m(e)}}}function Ke(i){var n;let e,l,t=((n=new Date(i[0].meta.date))==null?void 0:n.toLocaleDateString(i[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"",s;return{c(){e=L("div"),l=L("div"),s=Q(t),this.h()},l(a){e=N(a,"DIV",{class:!0});var r=C(e);l=N(r,"DIV",{class:!0});var o=C(l);s=Z(o,t),o.forEach(m),r.forEach(m),this.h()},h(){p(l,"class","date svelte-10gblkc"),p(e,"class","date svelte-10gblkc")},m(a,r){P(a,e,r),O(e,l),O(l,s)},p(a,r){var o;r&1&&t!==(t=((o=new Date(a[0].meta.date))==null?void 0:o.toLocaleDateString(a[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"")&&_e(s,t)},d(a){a&&m(e)}}}function Rt(i){var A,D,V;let e,l,t,s,n=i[0].meta.title+"",a,r,o,c,u,f,d,_=((A=i[0].meta)==null?void 0:A.description)&&Ze(i),y=((D=i[0].meta)==null?void 0:D.author)&&Re(i),S=((V=i[0].meta)==null?void 0:V.date)&&Ke(i);return{c(){e=L("a"),l=Q("← Index"),t=X(),s=L("h1"),a=Q(n),r=X(),_&&_.c(),o=X(),c=L("div"),y&&y.c(),u=X(),S&&S.c(),f=X(),d=L("div"),this.h()},l(h){e=N(h,"A",{href:!0,class:!0,rel:!0});var g=C(e);l=Z(g,"← Index"),g.forEach(m),t=H(h),s=N(h,"H1",{class:!0});var k=C(s);a=Z(k,n),k.forEach(m),r=H(h),_&&_.l(h),o=H(h),c=N(h,"DIV",{class:!0});var I=C(c);y&&y.l(I),u=H(I),S&&S.l(I),I.forEach(m),f=H(h),d=N(h,"DIV",{class:!0});var E=C(d);E.forEach(m),this.h()},h(){p(e,"href",Ht+"/"),p(e,"class","index svelte-10gblkc"),p(e,"rel","noopener noreferrer"),p(s,"class","svelte-10gblkc"),p(c,"class","metadata svelte-10gblkc"),p(d,"class","markdown svelte-10gblkc")},m(h,g){P(h,e,g),O(e,l),P(h,t,g),P(h,s,g),O(s,a),P(h,r,g),_&&_.m(h,g),P(h,o,g),P(h,c,g),y&&y.m(c,null),O(c,u),S&&S.m(c,null),P(h,f,g),P(h,d,g),d.innerHTML=i[1]},p(h,[g]){var k,I,E;g&1&&n!==(n=h[0].meta.title+"")&&_e(a,n),(k=h[0].meta)!=null&&k.description?_?_.p(h,g):(_=Ze(h),_.c(),_.m(o.parentNode,o)):_&&(_.d(1),_=null),(I=h[0].meta)!=null&&I.author?y?y.p(h,g):(y=Re(h),y.c(),y.m(c,u)):y&&(y.d(1),y=null),(E=h[0].meta)!=null&&E.date?S?S.p(h,g):(S=Ke(h),S.c(),S.m(c,null)):S&&(S.d(1),S=null)},i:Y,o:Y,d(h){h&&m(e),h&&m(t),h&&m(s),h&&m(r),_&&_.d(h),h&&m(o),h&&m(c),y&&y.d(),S&&S.d(),h&&m(f),h&&m(d)}}}const Kt=/\[\^([^\]]+)\]/g;let jt=100;function $t(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),i.currentTarget.classList.add("hover")}function xt(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),i.currentTarget.classList.remove("hover")}function el(i,e,l){const t=l-e;return(i-e)/t*100}function tl(i,e,l){const t=l-e;return e+t*i/100}function ll(i,e,l){let t,s;se(i,Pe,h=>l(8,t=h)),se(i,Xe,h=>l(9,s=h));let{data:n}=e,{items:a}=e,{scrollTopVal:r}=e,o=n.text,c=1;const f=o.replace(/<a\s+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,(h,g,k)=>{if(g.startsWith("http"))return`<a class="external" target="_blank" href="${g}" title="${k}">${k}</a>`;{let I=g.split("/")[1];return`<a class="node-highlite" unique-id="${I}" id="${g.split("/")[1]}"
				data-id="${g.split("/")[1]}" title="${k}">${k}
				<span class="symbol node" unique-id="${I}" data-id="item_${g.split("/")[1]}"
				data-class="${a.filter(E=>E.label==k).map(E=>{var z,G;return(G=(z=E.data)==null?void 0:z["@type"])==null?void 0:G[1]})}">
					●
					</span></a>`}}).replace(Kt,(h,g)=>{const k=c++;return`<sup id="fn-${k}"><a href="#fnref-${k}">${k}</a></sup><span id="fn-${k}-content">${g}</span>`}),d=Array.from({length:c-1},(h,g)=>{var E;const k=g+1,I=(E=f.match(new RegExp(`<span id="fn-${k}-content">([^<]+)</span>`)))==null?void 0:E[1];return`<li id="fnref-${k}"> ${I}</li>`}).join(""),_=`${f}
	<ol class="biblio">${d}</ol>`;let y;Je(async()=>{l(4,y=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),A(y),y.forEach(h=>{h.addEventListener("mouseenter",$t),h.addEventListener("mouseleave",xt),h.addEventListener("click",S)})});function S(h){y.forEach(I=>{const E=I.getAttribute("data-id"),z=document.querySelector(`.node[data-id="${E}"]`);z&&z.classList.remove("clicked"),I.classList.remove("clicked")});const g=h.currentTarget.getAttribute("data-id"),k=document.querySelector(`.node[data-id="${g}"]`);k&&k.classList.toggle("clicked"),h.currentTarget.classList.toggle("clicked"),le(Xe,s=g,s)}function A(h){let g=null;l(4,y=Array.from(h).map(k=>{let I=k.offsetTop;return g!==null&&I<=g?k.adjustedOffsetTop=g+jt:k.adjustedOffsetTop=I,g=k.adjustedOffsetTop,k}))}let D=0;function V(h,g){var k,I,E,z,G,b;if(!t){let v=(k=h==null?void 0:h[D])==null?void 0:k.adjustedOffsetTop,U=(I=h==null?void 0:h[D+1])==null?void 0:I.adjustedOffsetTop,R=(E=h==null?void 0:h[D])==null?void 0:E.getAttribute("data-id"),$=(z=h==null?void 0:h[D+1])==null?void 0:z.getAttribute("data-id"),q=(G=document.querySelector(`.node[data-id="${R}"]`))==null?void 0:G.offsetTop,x=(b=document.querySelector(`.node[data-id="${$}"]`))==null?void 0:b.offsetTop,K=el(g,v,U),T=tl(K,q,x);g>U&&D++,g<v&&D!=0&&D--;const w=document.querySelector(".links:first-of-type");v&&U&&w&&K&&T&&(w==null||w.scrollTo({top:T}))}}return i.$$set=h=>{"data"in h&&l(0,n=h.data),"items"in h&&l(2,a=h.items),"scrollTopVal"in h&&l(3,r=h.scrollTopVal)},i.$$.update=()=>{i.$$.dirty&24&&V(y,r)},[n,_,a,r,y]}class sl extends Ie{constructor(e){super(),we(this,e,ll,Rt,Ee,{data:0,items:2,scrollTopVal:3})}}function je(i,e,l){const t=i.slice();return t[27]=e[l],t}function il(i){let e,l=(i[0].title||"")+"",t;return{c(){e=L("div"),t=Q(l),this.h()},l(s){e=N(s,"DIV",{class:!0});var n=C(e);t=Z(n,l),n.forEach(m),this.h()},h(){p(e,"class","title svelte-x5b8hf")},m(s,n){P(s,e,n),O(e,t)},p(s,n){n&1&&l!==(l=(s[0].title||"")+"")&&_e(t,l)},d(s){s&&m(e)}}}function nl(i){let e,l,t,s,n,a=(i[0].title||"")+"",r,o,c;return{c(){e=L("img"),s=X(),n=L("div"),r=Q(a),this.h()},l(u){e=N(u,"IMG",{src:!0,alt:!0,class:!0}),s=H(u),n=N(u,"DIV",{class:!0});var f=C(n);r=Z(f,a),f.forEach(m),this.h()},h(){Oe(e.src,l=i[5])||p(e,"src",l),p(e,"alt",t=i[0].title),p(e,"class","svelte-x5b8hf"),p(n,"class","title svelte-x5b8hf")},m(u,f){P(u,e,f),P(u,s,f),P(u,n,f),O(n,r),o||(c=J(e,"load",i[11]),o=!0)},p(u,f){f&32&&!Oe(e.src,l=u[5])&&p(e,"src",l),f&1&&t!==(t=u[0].title)&&p(e,"alt",t),f&1&&a!==(a=(u[0].title||"")+"")&&_e(r,a)},d(u){u&&m(e),u&&m(s),u&&m(n),o=!1,c()}}}function al(i){let e,l,t,s,n,a=i[0].title+"",r,o,c;return{c(){e=L("img"),s=X(),n=L("div"),r=Q(a),this.h()},l(u){e=N(u,"IMG",{src:!0,alt:!0,class:!0}),s=H(u),n=N(u,"DIV",{class:!0});var f=C(n);r=Z(f,a),f.forEach(m),this.h()},h(){Oe(e.src,l=i[0].img.replace("square","large"))||p(e,"src",l),p(e,"alt",t=i[0].title),p(e,"class","svelte-x5b8hf"),p(n,"class","title svelte-x5b8hf")},m(u,f){P(u,e,f),P(u,s,f),P(u,n,f),O(n,r),o||(c=J(e,"load",i[11]),o=!0)},p(u,f){f&1&&!Oe(e.src,l=u[0].img.replace("square","large"))&&p(e,"src",l),f&1&&t!==(t=u[0].title)&&p(e,"alt",t),f&1&&a!==(a=u[0].title+"")&&_e(r,a)},d(u){u&&m(e),u&&m(s),u&&m(n),o=!1,c()}}}function $e(i){let e,l=i[8].essays,t=[];for(let s=0;s<l.length;s+=1)t[s]=xe(je(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let a=0;a<t.length;a+=1)t[a].m(s,n);P(s,e,n)},p(s,n){if(n&256){l=s[8].essays;let a;for(a=0;a<l.length;a+=1){const r=je(s,l,a);t[a]?t[a].p(r,n):(t[a]=xe(r),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(s){Te(t,s),s&&m(e)}}}function xe(i){let e,l,t,s=i[27].title+"",n,a;return{c(){e=L("a"),l=Q("→"),t=L("em"),n=Q(s),this.h()},l(r){e=N(r,"A",{class:!0,href:!0,target:!0,rel:!0});var o=C(e);l=Z(o,"→"),t=N(o,"EM",{});var c=C(t);n=Z(c,s),c.forEach(m),o.forEach(m),this.h()},h(){p(e,"class","link svelte-x5b8hf"),p(e,"href",a=i[27].url),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(r,o){P(r,e,o),O(e,l),O(e,t),O(t,n)},p(r,o){o&256&&s!==(s=r[27].title+"")&&_e(n,s),o&256&&a!==(a=r[27].url)&&p(e,"href",a)},d(r){r&&m(e)}}}function et(i){let e;function l(n,a){return n[0].title==null||n[0].title.length==1?ol:rl}let t=l(i),s=t(i);return{c(){s.c(),e=W()},l(n){s.l(n),e=W()},m(n,a){s.m(n,a),P(n,e,a)},p(n,a){t===(t=l(n))&&s?s.p(n,a):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s.d(n),n&&m(e)}}}function rl(i){let e,l,t;return{c(){e=L("a"),l=Q("→ Metadata"),this.h()},l(s){e=N(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=C(e);l=Z(n,"→ Metadata"),n.forEach(m),this.h()},h(){p(e,"class","link svelte-x5b8hf"),p(e,"href",t=`${i[3]}/item/${i[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(s,n){P(s,e,n),O(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/item/${s[4]}`)&&p(e,"href",t)},d(s){s&&m(e)}}}function ol(i){let e,l,t;return{c(){e=L("a"),l=Q("→ Metadata"),this.h()},l(s){e=N(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=C(e);l=Z(n,"→ Metadata"),n.forEach(m),this.h()},h(){p(e,"class","link svelte-x5b8hf"),p(e,"href",t=`${i[3]}/media/${i[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(s,n){P(s,e,n),O(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/media/${s[4]}`)&&p(e,"href",t)},d(s){s&&m(e)}}}function fl(i){let e,l,t,s,n,a;function r(d,_){return d[0].img?al:d[5]?nl:il}let o=r(i),c=o(i),u=i[8]!=null&&$e(i),f=i[3]&&et(i);return{c(){e=L("div"),c.c(),l=X(),u&&u.c(),t=X(),f&&f.c(),this.h()},l(d){e=N(d,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var _=C(e);c.l(_),l=H(_),u&&u.l(_),t=H(_),f&&f.l(_),_.forEach(m),this.h()},h(){p(e,"class","node svelte-x5b8hf"),p(e,"title",s=i[0].title),p(e,"source",i[9]),p(e,"target",i[4]),p(e,"data-id",i[4]),Le(e,"selected",i[7]),Le(e,"linkToEssay",i[8]!=null)},m(d,_){P(d,e,_),c.m(e,null),O(e,l),u&&u.m(e,null),O(e,t),f&&f.m(e,null),i[21](e),n||(a=[J(e,"mouseover",i[22]),J(e,"mouseleave",function(){We(i[13](i[4]))&&i[13](i[4]).apply(this,arguments)}),J(e,"click",i[18]),J(e,"keydown",i[19]),J(e,"focus",i[20])],n=!0)},p(d,[_]){i=d,o===(o=r(i))&&c?c.p(i,_):(c.d(1),c=o(i),c&&(c.c(),c.m(e,l))),i[8]!=null?u?u.p(i,_):(u=$e(i),u.c(),u.m(e,t)):u&&(u.d(1),u=null),i[3]?f?f.p(i,_):(f=et(i),f.c(),f.m(e,null)):f&&(f.d(1),f=null),_&1&&s!==(s=i[0].title)&&p(e,"title",s),_&512&&p(e,"source",i[9]),_&16&&p(e,"target",i[4]),_&16&&p(e,"data-id",i[4]),_&128&&Le(e,"selected",i[7]),_&256&&Le(e,"linkToEssay",i[8]!=null)},i:Y,o:Y,d(d){d&&m(e),c.d(),u&&u.d(),f&&f.d(),i[21](null),n=!1,Se(a)}}}function ul(i,e,l){let t,s,n,a,r,o,c=Y,u=()=>(c(),c=Me(D,T=>l(17,o=T)),D),f,d=Y,_=()=>(d(),d=Me(V,T=>l(24,f=T)),V),y,S;se(i,de,T=>l(16,r=T)),se(i,Xe,T=>l(25,y=T)),se(i,Ve,T=>l(10,S=T)),i.$$.on_destroy.push(()=>c()),i.$$.on_destroy.push(()=>d());let{datum:A}=e,{entities:D}=e;u();let{updatePosition:V}=e;_();let{essaysItems:h}=e,{site:g}=e,{openNode:k}=e,I,E=null;St(()=>{const T=A.source;T==`item_${y}`&&T!=E&&k(A,1),E=`item_${y}`}),Tt(()=>{le(V,f=!0,f)});function z(){le(V,f=!0,f)}function G(T){var j;const w=T.split("/"),M=o.find(ne=>ne["o:id"]==w.slice(-1)[0]);return(j=M==null?void 0:M.thumbnail_display_urls)==null?void 0:j.large}let b;function v(T){const w=T,M=document.querySelector(`.node-highlite[data-id="${w}"]`);M&&M.classList.add("hover"),b.classList.add("hover")}function U(T){const w=T,M=document.querySelector(`.node-highlite[data-id="${w}"]`);M&&M.classList.remove("hover"),b.classList.remove("hover")}function R(T){ze.call(this,i,T)}function $(T){ze.call(this,i,T)}function q(T){ze.call(this,i,T)}function x(T){ye[T?"unshift":"push"](()=>{b=T,l(6,b)})}const K=()=>{le(Ve,S=s,S),v(s)};return i.$$set=T=>{"datum"in T&&l(0,A=T.datum),"entities"in T&&u(l(1,D=T.entities)),"updatePosition"in T&&_(l(2,V=T.updatePosition)),"essaysItems"in T&&l(14,h=T.essaysItems),"site"in T&&l(3,g=T.site),"openNode"in T&&l(15,k=T.openNode)},i.$$.update=()=>{i.$$.dirty&131073&&o&&l(5,I=G(A.target)),i.$$.dirty&1&&l(9,t=A.source.split("/").slice(-1)[0]),i.$$.dirty&1&&l(4,s=A.target.split("/").slice(-1)[0]),i.$$.dirty&16400&&l(8,n=h.find(T=>T.id==s)),i.$$.dirty&65537&&l(7,a=r.some(T=>(T==null?void 0:T.id)==A.target))},[A,D,V,g,s,I,b,a,n,t,S,z,v,U,h,k,r,o,R,$,q,x,K]}class Dt extends Ie{constructor(e){super(),we(this,e,ul,fl,Ee,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}var cl=0;function dl(){return++cl}var He=Function("return this")();typeof He.__nextId!="function"&&(He.__nextId=dl);function Lt(){return"uid-"+He.__nextId()}function _l(i){let e,l,t;return{c(){e=L("div"),this.h()},l(s){e=N(s,"DIV",{source:!0,target:!0}),C(e).forEach(m),this.h()},h(){p(e,"source",l=i[0].source.split("/").slice(-1)[0]),p(e,"target",t=i[0].target.split("/").slice(-1)[0])},m(s,n){P(s,e,n),i[8](e)},p(s,[n]){n&1&&l!==(l=s[0].source.split("/").slice(-1)[0])&&p(e,"source",l),n&1&&t!==(t=s[0].target.split("/").slice(-1)[0])&&p(e,"target",t)},i:Y,o:Y,d(s){s&&m(e),i[8](null)}}}let tt=0;function hl(i,e,l){let t,s,n,a,r=Y,o=()=>(r(),r=Me(_,h=>l(5,a=h)),_),c,u;se(i,Ae,h=>l(12,n=h)),se(i,qe,h=>l(6,c=h)),se(i,de,h=>l(7,u=h)),i.$$.on_destroy.push(()=>r());let{datum:f}=e,{label:d}=e,{updatePosition:_}=e;o();let y,S=Lt();function A(h,g=0,k){const I=h.split("/").slice(-1)[0],E=[...document.querySelectorAll(`.node[data-id="${I}"]`)],z=[];return E.forEach(G=>{const b=G.getBoundingClientRect(),v={x:b.x+c,y:b.y+g,width:b.width-g/2,height:b.height,selected:"selected"};z.push(v)}),z}function D(){delete n[S],le(_,a=!1,a);const h=A(f.source,tt),g=A(f.target,tt);y&&(y.getBoundingClientRect().x,y.getBoundingClientRect().y),h.forEach(k=>{g.forEach(I=>{let E=100;const z=k==null?void 0:k.selected;let G,b,v,U,R;G=k.x+k.width,b=k.y,v=I.x,U=I.y,I.x<k.x||I.x==k.x?R=I.x-E*5:I.x==k.x?R=I.x-E*3:R=I.x-E,f.source.includes("item_")&&(R=I.x-E);const $=G+E,q=b,x=I.y,K=`M${G},${b}C${$},${q} ${R},${x} ${v},${U}`;le(Ae,n[S]=n[S]||[],n),n[S].push({class:s,d:K,label:d,selected:z,datum:{source:f.source.split("/").at(-1),target:f.target.split("/").at(-1)},reverse:f==null?void 0:f.reverse})})})}Tt(()=>{delete n[S],le(Ae,n=[],n)});function V(h){ye[h?"unshift":"push"](()=>{y=h,l(2,y)})}return i.$$set=h=>{"datum"in h&&l(0,f=h.datum),"label"in h&&l(3,d=h.label),"updatePosition"in h&&o(l(1,_=h.updatePosition))},i.$$.update=()=>{i.$$.dirty&96&&D(),i.$$.dirty&128&&l(4,t=u.slice(-1)[0].id),i.$$.dirty&17&&(s=f.target==t||f.source==t?"highlite":"")},[f,_,y,d,t,a,c,u,V]}class Nt extends Ie{constructor(e){super(),we(this,e,hl,_l,Ee,{datum:0,label:3,updatePosition:1})}}new TextEncoder;async function ml(i){const e=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,l=[],t=[],s=[],n=[];let a;for(;a=e.exec(i);)if(!a[2].includes("http")){const h=a[3],g=a[2];g.includes("item/")&&l.push(g.split("/")[1]),g.includes("set/")&&s.push(g.split("/")[1]),g.includes("media/")&&t.push(g.split("/")[1]),n.push({label:h,id:g.split("/")[1]})}const r=Wt,c=V(l,r).map(h=>{const g=`${ue}/items?${h.map(k=>`id[]=${k}`).join("&")}`;return fetch(g).then(k=>k.json())}),f=V(s,r).map(h=>{const g=`${ue}/item_sets?${h.map(k=>`id[]=${k}`).join("&")}`;return fetch(g).then(k=>k.json())}),_=V(t,r).map(h=>{const g=`${ue}/media?${h.map(k=>`id[]=${k}`).join("&")}`;return fetch(g).then(k=>k.json())}),y=await Promise.all(c),S=await Promise.all(f),A=await Promise.all(_),D=[...y.flat(),...A.flat(),...S.flat()];for(let h=0;h<D.length;h++){const g=n.find(I=>D[h]["o:id"]==I.id),k=D[h];g.uniqueId=Lt(),g.data=k}return n;function V(h,g){const k=[];for(let I=0;I<h.length;I+=g)k.push(h.slice(I,I+g));return k}}async function zt(i){let e=[];for(let t=0;t<i.length;t++)if(i[t].data){let s=i[t].data,n=i[t].set||null,a=pl(s,n);e=[...e,...a]}return{...{nodes:e.reduce((t,s)=>(t.find(n=>n.id===s.source)||t.push({id:s.source,title:s.title}),t.find(n=>n.id===s.target)||t.push({id:s.target,title:s.title}),t),[]),links:e}}}function pl(i,e){var o;let l=[],t=`${ue}/resources/${i["o:id"]}`;e&&l.push({source:`${ue}/resources/${e.id}`,target:t,img:(o=i==null?void 0:i.thumbnail_display_urls)==null?void 0:o.large,title:i["o:title"]});let s,n=!1;const a=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/;let r=async function(c){var u,f,d,_,y,S,A,D,V,h,g,k;for(let I in c)if(I==="@id"&&c[I].startsWith(ue)&&(c["o:title"]||c.display_title||n==!0)){let E=c[I].split("/").pop(),z=`${ue}/resources/${E}`;const G=c["o:title"]||c.display_title,b=(c==null?void 0:c.thumbnail_url)||((u=c==null?void 0:c.thumbnail_display_urls)==null?void 0:u.large),v=l.some($=>$.source===t&&$.target===z);let U=((d=(f=c.property_label)==null?void 0:f.replace("_"," "))==null?void 0:d.replace(a,""))||(s==null?void 0:s.replace(a,""));const R=Ut.map($=>$.props.includes(U)?$.key:"").find(Boolean);v||l.push({source:t,target:z,title:G,img:b,property:U,category:R,reverse:n})}else if(I==="@id"&&!c[I].startsWith(ue)&&c["o:label"]){let E=((y=(_=c.property_label)==null?void 0:_.replace("_"," "))==null?void 0:y.replace(a,""))||(s==null?void 0:s.replace(a,""));l.push({source:t,target:c[I],title:c["o:label"],property:E,category:"",external:!0,reverse:n})}else if(I==="@id"&&s=="media"&&t.split("/").pop()!=((S=c==null?void 0:c["o:primary_media"])==null?void 0:S["@id"].split("/").pop())){let E=((D=(A=c.property_label)==null?void 0:A.replace("_"," "))==null?void 0:D.replace(a,""))||(s==null?void 0:s.replace(a,"")),z=c[I].split("/").pop(),G=`${ue}/resources/${z}`;l.push({source:t,target:G,title:(c==null?void 0:c["o:label"])||" ",property:E,category:"",reverse:n})}else if(I==="@id"&&s=="item"){let E=((h=(V=c.property_label)==null?void 0:V.replace("_"," "))==null?void 0:h.replace(a,""))||(s==null?void 0:s.replace(a,"")),z=c[I].split("/").pop(),G=`${ue}/resources/${z}`;l.push({source:t,target:G,title:(c==null?void 0:c["o:label"])||" ",property:E,category:"",reverse:n})}else typeof c[I]=="object"&&(isNaN(I)&&(s=(k=(g=(I==null?void 0:I.split(":"))[1])==null?void 0:g.split("_"))==null?void 0:k.join(" "),I=="@reverse"&&(n=!0)),r(c[I]))};return r(i),l}function lt(i,e,l){const t=i.slice();return t[22]=e[l],t}function st(i){let e,l;return{c(){e=L("div"),l=Q("Loading..."),this.h()},l(t){e=N(t,"DIV",{class:!0});var s=C(e);l=Z(s,"Loading..."),s.forEach(m),this.h()},h(){p(e,"class","loading svelte-1kyenid")},m(t,s){P(t,e,s),O(e,l)},d(t){t&&m(e)}}}function it(i){let e,l,t=i[0],s=[];for(let a=0;a<t.length;a+=1)s[a]=at(lt(i,t,a));const n=a=>F(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=W()},l(a){for(let r=0;r<s.length;r+=1)s[r].l(a);e=W()},m(a,r){for(let o=0;o<s.length;o+=1)s[o].m(a,r);P(a,e,r),l=!0},p(a,r){if(r&639){t=a[0];let o;for(o=0;o<t.length;o+=1){const c=lt(a,t,o);s[o]?(s[o].p(c,r),B(s[o],1)):(s[o]=at(c),s[o].c(),B(s[o],1),s[o].m(e.parentNode,e))}for(oe(),o=t.length;o<s.length;o+=1)n(o);fe()}},i(a){if(!l){for(let r=0;r<t.length;r+=1)B(s[r]);l=!0}},o(a){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)F(s[r]);l=!1},d(a){Te(s,a),a&&m(e)}}}function gl(i){var t;let e,l;return e=new Nt({props:{datum:i[22],updatePosition:i[3],label:((t=i[22])==null?void 0:t.property)||""}}),{c(){he(e.$$.fragment)},l(s){me(e.$$.fragment,s)},m(s,n){pe(e,s,n),l=!0},p(s,n){var r;const a={};n&1&&(a.datum=s[22]),n&8&&(a.updatePosition=s[3]),n&1&&(a.label=((r=s[22])==null?void 0:r.property)||""),e.$set(a)},i(s){l||(B(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){ge(e,s)}}}function bl(i){let e,l,t=i[22].source!=i[22].target&&nt(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[22].source!=s[22].target?t?(t.p(s,n),n&1&&B(t,1)):(t=nt(s),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(oe(),F(t,1,1,()=>{t=null}),fe())},i(s){l||(B(t),l=!0)},o(s){F(t),l=!1},d(s){t&&t.d(s),s&&m(e)}}}function nt(i){var c;let e,l,t,s,n;const a=[vl,kl],r=[];function o(u,f){var d;return(d=u[22])!=null&&d.external?1:0}return e=o(i),l=r[e]=a[e](i),s=new Nt({props:{datum:i[22],updatePosition:i[3],label:((c=i[22])==null?void 0:c.property)||""}}),{c(){l.c(),t=X(),he(s.$$.fragment)},l(u){l.l(u),t=H(u),me(s.$$.fragment,u)},m(u,f){r[e].m(u,f),P(u,t,f),pe(s,u,f),n=!0},p(u,f){var y;let d=e;e=o(u),e===d?r[e].p(u,f):(oe(),F(r[d],1,1,()=>{r[d]=null}),fe(),l=r[e],l?l.p(u,f):(l=r[e]=a[e](u),l.c()),B(l,1),l.m(t.parentNode,t));const _={};f&1&&(_.datum=u[22]),f&8&&(_.updatePosition=u[3]),f&1&&(_.label=((y=u[22])==null?void 0:y.property)||""),s.$set(_)},i(u){n||(B(l),B(s.$$.fragment,u),n=!0)},o(u){F(l),F(s.$$.fragment,u),n=!1},d(u){r[e].d(u),u&&m(t),ge(s,u)}}}function kl(i){let e,l,t,s;return l=new Dt({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),{c(){e=L("a"),he(l.$$.fragment),this.h()},l(n){e=N(n,"A",{href:!0,target:!0,rel:!0});var a=C(e);me(l.$$.fragment,a),a.forEach(m),this.h()},h(){p(e,"href",t=i[22].target),p(e,"target","_blank"),p(e,"rel","noreferrer")},m(n,a){P(n,e,a),pe(l,e,null),s=!0},p(n,a){const r={};a&64&&(r.site=n[6]),a&4&&(r.entities=n[2]),a&8&&(r.updatePosition=n[3]),a&1&&(r.datum=n[22]),a&32&&(r.essaysItems=n[5]),l.$set(r),(!s||a&1&&t!==(t=n[22].target))&&p(e,"href",t)},i(n){s||(B(l.$$.fragment,n),s=!0)},o(n){F(l.$$.fragment,n),s=!1},d(n){n&&m(e),ge(l)}}}function vl(i){let e,l;function t(){return i[16](i[22])}function s(){return i[17](i[22])}return e=new Dt({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),e.$on("click",t),e.$on("keydown",s),{c(){he(e.$$.fragment)},l(n){me(e.$$.fragment,n)},m(n,a){pe(e,n,a),l=!0},p(n,a){i=n;const r={};a&64&&(r.site=i[6]),a&4&&(r.entities=i[2]),a&8&&(r.updatePosition=i[3]),a&1&&(r.datum=i[22]),a&32&&(r.essaysItems=i[5]),e.$set(r)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){ge(e,n)}}}function at(i){let e,l,t,s,n;function a(...u){return i[15](i[22],...u)}const r=[bl,gl],o=[];function c(u,f){return f&3&&(e=null),e==null&&(e=!!u[1].some(a)),e?0:u[22].source&&u[22].target&&u[22].source!=u[22].target?1:-1}return~(l=c(i,-1))&&(t=o[l]=r[l](i)),{c(){t&&t.c(),s=W()},l(u){t&&t.l(u),s=W()},m(u,f){~l&&o[l].m(u,f),P(u,s,f),n=!0},p(u,f){i=u;let d=l;l=c(i,f),l===d?~l&&o[l].p(i,f):(t&&(oe(),F(o[d],1,1,()=>{o[d]=null}),fe()),~l?(t=o[l],t?t.p(i,f):(t=o[l]=r[l](i),t.c()),B(t,1),t.m(s.parentNode,s)):t=null)},i(u){n||(B(t),n=!0)},o(u){F(t),n=!1},d(u){~l&&o[l].d(u),u&&m(s)}}}function yl(i){let e,l,t,s=i[0]&&typeof i[0]=="object"&&Object.keys(i[0]).length>0,n,a=i[8]&&st(),r=s&&it(i);return{c(){e=L("section"),a&&a.c(),l=X(),t=L("div"),r&&r.c()},l(o){e=N(o,"SECTION",{});var c=C(e);a&&a.l(c),l=H(c),t=N(c,"DIV",{});var u=C(t);r&&r.l(u),u.forEach(m),c.forEach(m)},m(o,c){P(o,e,c),a&&a.m(e,null),O(e,l),O(e,t),r&&r.m(t,null),i[18](e),n=!0},p(o,[c]){o[8]?a||(a=st(),a.c(),a.m(e,l)):a&&(a.d(1),a=null),c&1&&(s=o[0]&&typeof o[0]=="object"&&Object.keys(o[0]).length>0),s?r?(r.p(o,c),c&1&&B(r,1)):(r=it(o),r.c(),B(r,1),r.m(t,null)):r&&(oe(),F(r,1,1,()=>{r=null}),fe())},i(o){n||(B(r),n=!0)},o(o){F(r),n=!1},d(o){o&&m(e),a&&a.d(),r&&r.d(),i[18](null)}}}function Il(i){let e=document.querySelector(`#col_${i}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function wl(i,e){return e.filter(l=>!i.some(t=>t.target===l.target||t.id===l.target))}function El(i,e,l){let t,s=Y,n=()=>(s(),s=Me(d,v=>l(20,t=v)),d),a;se(i,de,v=>l(21,a=v)),i.$$.on_destroy.push(()=>s());let{category:r}=e,{data:o}=e,{newData:c}=e,{dataLen:u}=e,{entities:f}=e,{updatePosition:d}=e;n();let{index:_}=e,{loadData:y}=e,{defaultNodes:S}=e,{batchSize:A}=e,{essaysItems:D}=e,{site:V}=e,h,g,k={nodes:[],links:[]};async function I(v,U){Il(U),l(8,g=!0),a.splice(U,a.length-U);let R=a.map(w=>w.data).flat();const q=await(await fetch(v.target)).json();if(q!=null&&q["o:items"]&&a.length==1){let w=[];const M=q["o:items"]["@id"];(await(await fetch(M)).json()).forEach(ie=>{w.push(ie)});let ee=w.map(ie=>({"o:title":ie["o:title"],"@id":ie["@id"],thumbnail_display_urls:ie.thumbnail_display_urls}));q.related={...ee}}k=await zt([{data:q}]);let x=k.links.filter(w=>w.source===v.target||w.target===v.target),K=wl([...S,...R],x),T=x.slice(0,A);le(de,a[U]={id:v.target,data:x.sort((w,M)=>{if(w.property)return w.property.localeCompare(M.property)}),page:0,new:K,paginate:T},a),l(8,g=!1),K.length>0&&y(T,A),le(d,t=!0,t)}const E=(v,U)=>(U==null?void 0:U.title)===v.title,z=v=>{I(v,_+1)},G=v=>{I(v,_+1)};function b(v){ye[v?"unshift":"push"](()=>{h=v,l(7,h)})}return i.$$set=v=>{"category"in v&&l(10,r=v.category),"data"in v&&l(0,o=v.data),"newData"in v&&l(1,c=v.newData),"dataLen"in v&&l(11,u=v.dataLen),"entities"in v&&l(2,f=v.entities),"updatePosition"in v&&n(l(3,d=v.updatePosition)),"index"in v&&l(4,_=v.index),"loadData"in v&&l(12,y=v.loadData),"defaultNodes"in v&&l(13,S=v.defaultNodes),"batchSize"in v&&l(14,A=v.batchSize),"essaysItems"in v&&l(5,D=v.essaysItems),"site"in v&&l(6,V=v.site)},[o,c,f,d,_,D,V,h,g,I,r,u,y,S,A,E,z,G,b]}class At extends Ie{constructor(e){super(),we(this,e,El,yl,Ee,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function rt(i,e,l){const t=i.slice();return t[32]=e[l],t[34]=l,t}function Ue(i){const e=i.slice(),l=e[32].paginate.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property)));e[35]=l;const t=e[32].data.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property))).length;return e[36]=t,e}function ot(i,e,l){const t=i.slice();t[37]=e[l];const s=t[32].paginate.filter(function(...r){return i[20](t[37],...r)});t[38]=s;const n=t[32].data.filter(function(...r){return i[21](t[37],...r)}).length;return t[36]=n,t}function Pl(i){let e,l,t=i[5],s=[];for(let a=0;a<t.length;a+=1)s[a]=ht(rt(i,t,a));const n=a=>F(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=W()},l(a){for(let r=0;r<s.length;r+=1)s[r].l(a);e=W()},m(a,r){for(let o=0;o<s.length;o+=1)s[o].m(a,r);P(a,e,r),l=!0},p(a,r){if(r[0]&16063){t=a[5];let o;for(o=0;o<t.length;o+=1){const c=rt(a,t,o);s[o]?(s[o].p(c,r),B(s[o],1)):(s[o]=ht(c),s[o].c(),B(s[o],1),s[o].m(e.parentNode,e))}for(oe(),o=t.length;o<s.length;o+=1)n(o);fe()}},i(a){if(!l){for(let r=0;r<t.length;r+=1)B(s[r]);l=!0}},o(a){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)F(s[r]);l=!1},d(a){Te(s,a),a&&m(e)}}}function Sl(i){let e,l,t;return{c(){e=L("div"),l=L("h4"),t=Q("Loading Graph..."),this.h()},l(s){e=N(s,"DIV",{});var n=C(e);l=N(n,"H4",{class:!0});var a=C(l);t=Z(a,"Loading Graph..."),a.forEach(m),n.forEach(m),this.h()},h(){p(l,"class","loading svelte-d0zru6")},m(s,n){P(s,e,n),O(e,l),O(l,t)},p:Y,i:Y,o:Y,d(s){s&&m(e)}}}function Tl(i){let e,l;return{c(){e=L("div"),l=Q("There are no connections."),this.h()},l(t){e=N(t,"DIV",{class:!0});var s=C(e);l=Z(s,"There are no connections."),s.forEach(m),this.h()},h(){p(e,"class","no-items svelte-d0zru6")},m(t,s){P(t,e,s),O(e,l)},p:Y,i:Y,o:Y,d(t){t&&m(e)}}}function Dl(i){let e,l,t=i[32].paginate.filter(i[19]).length>0,s,n,a=i[3].mainCategories,r=[];for(let f=0;f<a.length;f+=1)r[f]=ut(ot(i,a,f));const o=f=>F(r[f],1,1,()=>{r[f]=null});let c=t&&ct(Ue(i)),u=i[32].paginate.length<i[32].new.length&&_t(i);return{c(){e=L("div");for(let f=0;f<r.length;f+=1)r[f].c();l=X(),c&&c.c(),s=X(),u&&u.c()},l(f){e=N(f,"DIV",{});var d=C(e);for(let _=0;_<r.length;_+=1)r[_].l(d);l=H(d),c&&c.l(d),s=H(d),u&&u.l(d),d.forEach(m)},m(f,d){P(f,e,d);for(let _=0;_<r.length;_+=1)r[_].m(e,null);O(e,l),c&&c.m(e,null),O(e,s),u&&u.m(e,null),n=!0},p(f,d){if(d[0]&7725){a=f[3].mainCategories;let _;for(_=0;_<a.length;_+=1){const y=ot(f,a,_);r[_]?(r[_].p(y,d),B(r[_],1)):(r[_]=ut(y),r[_].c(),B(r[_],1),r[_].m(e,l))}for(oe(),_=a.length;_<r.length;_+=1)o(_);fe()}d[0]&40&&(t=f[32].paginate.filter(f[19]).length>0),t?c?(c.p(Ue(f),d),d[0]&40&&B(c,1)):(c=ct(Ue(f)),c.c(),B(c,1),c.m(e,s)):c&&(oe(),F(c,1,1,()=>{c=null}),fe()),f[32].paginate.length<f[32].new.length?u?u.p(f,d):(u=_t(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(f){if(!n){for(let d=0;d<a.length;d+=1)B(r[d]);B(c),n=!0}},o(f){r=r.filter(Boolean);for(let d=0;d<r.length;d+=1)F(r[d]);F(c),n=!1},d(f){f&&m(e),Te(r,f),c&&c.d(),u&&u.d()}}}function ft(i){let e,l;return e=new At({props:{site:i[3].publicSite,essaysItems:i[2],category:i[37].key,data:i[38],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,s){pe(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&8&&(n.category=t[37].key),s[0]&40&&(n.data=t[38]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ge(e,t)}}}function ut(i){let e,l,t=i[38].length>0&&ft(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[38].length>0?t?(t.p(s,n),n[0]&40&&B(t,1)):(t=ft(s),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(oe(),F(t,1,1,()=>{t=null}),fe())},i(s){l||(B(t),l=!0)},o(s){F(t),l=!1},d(s){t&&t.d(s),s&&m(e)}}}function ct(i){let e,l,t=i[35].length>0&&dt(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[35].length>0?t?(t.p(s,n),n[0]&40&&B(t,1)):(t=dt(s),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(oe(),F(t,1,1,()=>{t=null}),fe())},i(s){l||(B(t),l=!0)},o(s){F(t),l=!1},d(s){t&&t.d(s),s&&m(e)}}}function dt(i){let e,l;return e=new At({props:{site:i[3].publicSite,essaysItems:i[2],category:"",data:i[35],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,s){pe(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&40&&(n.data=t[35]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ge(e,t)}}}function _t(i){let e,l,t,s;return{c(){e=L("div"),l=Q("Load more"),this.h()},l(n){e=N(n,"DIV",{class:!0});var a=C(e);l=Z(a,"Load more"),a.forEach(m),this.h()},h(){p(e,"class","more svelte-d0zru6")},m(n,a){P(n,e,a),O(e,l),t||(s=[J(e,"click",function(){We(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)}),J(e,"keydown",function(){We(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)})],t=!0)},p(n,a){i=n},d(n){n&&m(e),t=!1,Se(s)}}}function ht(i){let e,l,t,s,n,a,r;const o=[Dl,Tl],c=[];function u(f,d){var _,y;return(_=f[32])!=null&&_.new&&((y=f[32])==null?void 0:y.new.length)>0?0:1}return l=u(i),t=c[l]=o[l](i),{c(){e=L("div"),t.c(),s=X(),this.h()},l(f){e=N(f,"DIV",{class:!0,id:!0});var d=C(e);t.l(d),s=H(d),d.forEach(m),this.h()},h(){p(e,"class","links svelte-d0zru6"),p(e,"id","col_"+i[34])},m(f,d){P(f,e,d),c[l].m(e,null),O(e,s),i[22](e),n=!0,a||(r=[J(e,"scroll",i[23]),J(e,"click",i[24]),J(e,"keypress",i[25])],a=!0)},p(f,d){let _=l;l=u(f),l===_?c[l].p(f,d):(oe(),F(c[_],1,1,()=>{c[_]=null}),fe(),t=c[l],t?t.p(f,d):(t=c[l]=o[l](f),t.c()),B(t,1),t.m(e,s))},i(f){n||(B(t),n=!0)},o(f){F(t),n=!1},d(f){f&&m(e),c[l].d(),i[22](null),a=!1,Se(r)}}}function mt(i){let e,l,t,s;return{c(){e=L("div"),l=Q("✕"),this.h()},l(n){e=N(n,"DIV",{class:!0});var a=C(e);l=Z(a,"✕"),a.forEach(m),this.h()},h(){p(e,"class","close svelte-d0zru6")},m(n,a){P(n,e,a),O(e,l),t||(s=[J(e,"click",i[27]),J(e,"keypress",i[28])],t=!0)},p:Y,d(n){n&&m(e),t=!1,Se(s)}}}function Ll(i){let e,l,t,s,n,a;const r=[Sl,Pl],o=[];function c(f,d){return f[8].length==0?0:1}l=c(i),t=o[l]=r[l](i);let u=i[5].length>1&&mt(i);return{c(){e=L("div"),t.c(),s=X(),u&&u.c(),n=W(),this.h()},l(f){e=N(f,"DIV",{class:!0});var d=C(e);t.l(d),d.forEach(m),s=H(f),u&&u.l(f),n=W(),this.h()},h(){p(e,"class","graph svelte-d0zru6")},m(f,d){P(f,e,d),o[l].m(e,null),i[26](e),P(f,s,d),u&&u.m(f,d),P(f,n,d),a=!0},p(f,d){let _=l;l=c(f),l===_?o[l].p(f,d):(oe(),F(o[_],1,1,()=>{o[_]=null}),fe(),t=o[l],t?t.p(f,d):(t=o[l]=r[l](f),t.c()),B(t,1),t.m(e,null)),f[5].length>1?u?u.p(f,d):(u=mt(f),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null)},i(f){a||(B(t),a=!0)},o(f){F(t),a=!1},d(f){f&&m(e),o[l].d(),i[26](null),f&&m(s),u&&u.d(f),f&&m(n)}}}function Nl(i,e,l){const t=l-e;return(i-e)/t*100}function zl(i,e,l){const t=l-e;return e+t*i/100}function Al(i,e,l){let t,s,n,a;se(i,Pe,w=>l(30,s=w)),se(i,de,w=>l(5,n=w));let{updatePosition:r}=e,{handlePosition:o}=e,{data:c}=e,{visibleItemsID:u}=e,{essaysItems:f}=e,{config:d}=e,{items:_}=e,{screenSize:y}=e,S;const A=be([]);se(i,A,w=>l(8,a=w));let D=d.batch,V,h=c.nodes.filter(w=>u.includes(w.id));Je(async()=>{g(c.nodes,D)}),St(()=>{V.lastElementChild&&y>600&&V.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),o()});async function g(w,M){const j=w.map(ee=>{var ae,te;return(((ae=ee==null?void 0:ee.id)==null?void 0:ae.split("/"))||((te=ee==null?void 0:ee.target)==null?void 0:te.split("/"))).slice(-1)[0]}),ne=Math.ceil(j.length/M);for(let ee=0;ee<ne;ee++){const ie=j.slice(ee*M,(ee+1)*M);let ae=`${d.api}/items?${ie.map(re=>`id[]=${re}`).join("&")}`,te=await fetch(ae),ce=await te.json();A.update(re=>(re.includes(...ce)||re.push(...ce),re)),ce.length!=ie.length&&(ae=`${d.api}/media?${ie.map(re=>`id[]=${re}`).join("&")}`,te=await fetch(ae),ce=await te.json(),A.update(re=>(re.includes(...ce)||re.push(...ce),re)))}}let k;const I=(w,M)=>{var j,ne,ee,ie,ae;if(M!=null){const te=((j=n[w])==null?void 0:j.page)+1||0;le(de,n[w]={...n[w],page:te,paginate:(ne=n[w])==null?void 0:ne.data.slice(0,te*D)},n),(ee=n[w])!=null&&ee.data&&((ie=n[w])==null?void 0:ie.paginate.length)!=((ae=n[w])==null?void 0:ae.data.length)&&g(n[w].paginate.slice(-D),D)}};let E=0;function z(w){var M,j,ne,ee,ie,ae;if(s){const te=document.querySelectorAll(".links:first-of-type .node");let ce=(M=te==null?void 0:te[E])==null?void 0:M.offsetTop,re=(j=te==null?void 0:te[E])==null?void 0:j.getAttribute("data-id"),Be=(ne=te==null?void 0:te[E+1])==null?void 0:ne.offsetTop,qt=(ee=te==null?void 0:te[E+1])==null?void 0:ee.getAttribute("data-id"),Mt=(ie=document.querySelector(`.node-highlite[data-id="${re}"]`))==null?void 0:ie.offsetTop,Ot=(ae=document.querySelector(`.node-highlite[data-id="${qt}"]`))==null?void 0:ae.offsetTop,Ct=Nl(w,ce,Be),Fe=zl(Ct,Mt,Ot);const De=document.querySelector(".markdown__container");w>Be&&E++,w<ce&&E!=0&&E--,De&&Fe&&ce!==Be&&Fe>0&&(De==null||De.scrollTo({top:Fe}))}}const G=w=>!d.mainCategories.some(M=>M.props.includes(w.property)),b=(w,M)=>w.props.includes(M.property),v=(w,M)=>w.props.includes(M.property);function U(w){ye[w?"unshift":"push"](()=>{k=w,l(7,k)})}const R=()=>{let w=document.querySelector("#col_0");w.addEventListener("scroll",M=>{l(4,S=w==null?void 0:w.scrollTop)}),o()},$=()=>{o()},q=()=>{o()};function x(w){ye[w?"unshift":"push"](()=>{V=w,l(6,V)})}const K=()=>{le(de,n=[],n),o()},T=()=>{le(de,n=[],n)};return i.$$set=w=>{"updatePosition"in w&&l(0,r=w.updatePosition),"handlePosition"in w&&l(1,o=w.handlePosition),"data"in w&&l(14,c=w.data),"visibleItemsID"in w&&l(15,u=w.visibleItemsID),"essaysItems"in w&&l(2,f=w.essaysItems),"config"in w&&l(3,d=w.config),"items"in w&&l(16,_=w.items),"screenSize"in w&&l(17,y=w.screenSize)},i.$$.update=()=>{var w;i.$$.dirty[0]&65544&&l(18,t=_.filter(M=>M==null?void 0:M.data).map(M=>{var j,ne;return{img:(j=M.data)==null?void 0:j.thumbnail_display_urls.large,source:`item_${M.id}`,target:`${d.api}/resources/${M.id}`,title:((ne=M.data)==null?void 0:ne["o:title"])||""}})),i.$$.dirty[0]&262176&&(n&&n.length==0||de&&((w=n==null?void 0:n[0])==null?void 0:w.data.length)==0)&&le(de,n[0]={data:t,new:t,page:0,paginate:t},n),i.$$.dirty[0]&16&&z(S)},[r,o,f,d,S,n,V,k,a,A,D,h,g,I,c,u,_,y,t,G,b,v,U,R,$,q,x,K,T]}class ql extends Ie{constructor(e){super(),we(this,e,Al,Ll,Ee,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function pt(i,e,l){const t=i.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function gt(i,e,l){const t=i.slice();return t[6]=e[l],t}function bt(i){let e,l,t=Object.entries(i[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Pt(pt(i,t,n));return{c(){e=ke("svg"),l=ke("g");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=ve(n,"svg",{class:!0});var a=C(e);l=ve(a,"g",{});var r=C(l);for(let o=0;o<s.length;o+=1)s[o].l(r);r.forEach(m),a.forEach(m),this.h()},h(){p(e,"class","svelte-1ddz0y9")},m(n,a){P(n,e,a),O(e,l);for(let r=0;r<s.length;r+=1)s[r].m(l,null)},p(n,a){if(a&3){t=Object.entries(n[0]);let r;for(r=0;r<t.length;r+=1){const o=pt(n,t,r);s[r]?s[r].p(o,a):(s[r]=Pt(o),s[r].c(),s[r].m(l,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(n){n&&m(e),Te(s,n)}}}function kt(i){let e,l,t=i[6].label+"",s,n,a,r,o,c,u,f,d=i[6].label+"",_,y,S,A,D,V,h=i[6].reverse&&i[6].label&&vt(),g=!i[6].reverse&&i[6].label&&yt(),k=i[6].reverse&&i[6].label&&It(),I=!i[6].reverse&&i[6].label&&wt();return{c(){e=ke("text"),l=ke("textPath"),s=Q(t),h&&h.c(),n=W(),g&&g.c(),u=ke("text"),f=ke("textPath"),_=Q(d),k&&k.c(),y=W(),I&&I.c(),this.h()},l(E){e=ve(E,"text",{class:!0,source:!0,target:!0});var z=C(e);l=ve(z,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var G=C(l);s=Z(G,t),h&&h.l(G),n=W(),g&&g.l(G),G.forEach(m),z.forEach(m),u=ve(E,"text",{class:!0,source:!0,target:!0});var b=C(u);f=ve(b,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var v=C(f);_=Z(v,d),k&&k.l(v),y=W(),I&&I.l(v),v.forEach(m),b.forEach(m),this.h()},h(){p(l,"alignment-baseline","middle"),p(l,"href",a="#path_"+i[2]),p(l,"startOffset","99%"),p(l,"text-anchor","end"),p(e,"class",r="background "+i[6].class+" svelte-1ddz0y9"),p(e,"source",o=i[6].datum.source),p(e,"target",c=i[6].datum.target),p(f,"alignment-baseline","middle"),p(f,"href",S="#path_"+i[2]),p(f,"startOffset","99%"),p(f,"text-anchor","end"),p(u,"class",A=Ce(i[6].class)+" svelte-1ddz0y9"),p(u,"source",D=i[6].datum.source),p(u,"target",V=i[6].datum.target)},m(E,z){P(E,e,z),O(e,l),O(l,s),h&&h.m(l,null),O(l,n),g&&g.m(l,null),P(E,u,z),O(u,f),O(f,_),k&&k.m(f,null),O(f,y),I&&I.m(f,null)},p(E,z){z&1&&t!==(t=E[6].label+"")&&_e(s,t),E[6].reverse&&E[6].label?h||(h=vt(),h.c(),h.m(l,n)):h&&(h.d(1),h=null),!E[6].reverse&&E[6].label?g||(g=yt(),g.c(),g.m(l,null)):g&&(g.d(1),g=null),z&1&&a!==(a="#path_"+E[2])&&p(l,"href",a),z&1&&r!==(r="background "+E[6].class+" svelte-1ddz0y9")&&p(e,"class",r),z&1&&o!==(o=E[6].datum.source)&&p(e,"source",o),z&1&&c!==(c=E[6].datum.target)&&p(e,"target",c),z&1&&d!==(d=E[6].label+"")&&_e(_,d),E[6].reverse&&E[6].label?k||(k=It(),k.c(),k.m(f,y)):k&&(k.d(1),k=null),!E[6].reverse&&E[6].label?I||(I=wt(),I.c(),I.m(f,null)):I&&(I.d(1),I=null),z&1&&S!==(S="#path_"+E[2])&&p(f,"href",S),z&1&&A!==(A=Ce(E[6].class)+" svelte-1ddz0y9")&&p(u,"class",A),z&1&&D!==(D=E[6].datum.source)&&p(u,"source",D),z&1&&V!==(V=E[6].datum.target)&&p(u,"target",V)},d(E){E&&m(e),h&&h.d(),g&&g.d(),E&&m(u),k&&k.d(),I&&I.d()}}}function vt(i){let e;return{c(){e=Q(" -")},l(l){e=Z(l," -")},m(l,t){P(l,e,t)},d(l){l&&m(e)}}}function yt(i){let e;return{c(){e=Q("→")},l(l){e=Z(l,"→")},m(l,t){P(l,e,t)},d(l){l&&m(e)}}}function It(i){let e;return{c(){e=Q("←")},l(l){e=Z(l,"←")},m(l,t){P(l,e,t)},d(l){l&&m(e)}}}function wt(i){let e;return{c(){e=Q("→")},l(l){e=Z(l,"→")},m(l,t){P(l,e,t)},d(l){l&&m(e)}}}function Et(i){let e,l,t,s,n,a,r=(i[1]==i[6].datum.source&&i[6].selected!="not-selected"||i[1]==i[6].datum.target)&&kt(i);return{c(){e=ke("path"),r&&r.c(),a=W(),this.h()},l(o){e=ve(o,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),C(e).forEach(m),r&&r.l(o),a=W(),this.h()},h(){p(e,"id",l="path_"+i[2]),p(e,"class",t=Ce(i[6].class)+" svelte-1ddz0y9"),p(e,"data-attr",s=i[6].selected),p(e,"d",n=i[6].d)},m(o,c){P(o,e,c),r&&r.m(o,c),P(o,a,c)},p(o,c){c&1&&l!==(l="path_"+o[2])&&p(e,"id",l),c&1&&t!==(t=Ce(o[6].class)+" svelte-1ddz0y9")&&p(e,"class",t),c&1&&s!==(s=o[6].selected)&&p(e,"data-attr",s),c&1&&n!==(n=o[6].d)&&p(e,"d",n),o[1]==o[6].datum.source&&o[6].selected!="not-selected"||o[1]==o[6].datum.target?r?r.p(o,c):(r=kt(o),r.c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},d(o){o&&m(e),r&&r.d(o),o&&m(a)}}}function Pt(i){let e,l=i[3],t=[];for(let s=0;s<l.length;s+=1)t[s]=Et(gt(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let a=0;a<t.length;a+=1)t[a].m(s,n);P(s,e,n)},p(s,n){if(n&3){l=s[3];let a;for(a=0;a<l.length;a+=1){const r=gt(s,l,a);t[a]?t[a].p(r,n):(t[a]=Et(r),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(s){Te(t,s),s&&m(e)}}}function Ml(i){let e=Object.keys(i[0]).length>0,l,t=e&&bt(i);return{c(){t&&t.c(),l=W()},l(s){t&&t.l(s),l=W()},m(s,n){t&&t.m(s,n),P(s,l,n)},p(s,[n]){n&1&&(e=Object.keys(s[0]).length>0),e?t?t.p(s,n):(t=bt(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:Y,o:Y,d(s){t&&t.d(s),s&&m(l)}}}function Ol(i,e,l){let t,s;return se(i,Ae,n=>l(0,t=n)),se(i,Ve,n=>l(1,s=n)),[t,s]}class Cl extends Ie{constructor(e){super(),we(this,e,Ol,Ml,Ee,{})}}function Vl(i){let e,l,t,s,n,a,r,o,c,u,f;return t=new sl({props:{data:i[12],items:i[3],scrollTopVal:i[7]}}),a=new ql({props:{items:i[3],data:i[9],screenSize:i[0],essaysItems:i[5],visibleItemsID:i[4],handlePosition:i[14],updatePosition:i[13],config:Xt}}),o=new Cl({}),{c(){e=L("article"),l=L("section"),he(t.$$.fragment),s=X(),n=L("section"),he(a.$$.fragment),r=X(),he(o.$$.fragment),this.h()},l(d){e=N(d,"ARTICLE",{style:!0,class:!0});var _=C(e);l=N(_,"SECTION",{class:!0});var y=C(l);me(t.$$.fragment,y),y.forEach(m),s=H(_),n=N(_,"SECTION",{class:!0});var S=C(n);me(a.$$.fragment,S),S.forEach(m),r=H(_),me(o.$$.fragment,_),_.forEach(m),this.h()},h(){var d;p(l,"class","markdown__container svelte-15zdm0q"),p(n,"class","graph__container svelte-15zdm0q"),Gt(e,"--theme-color",((d=i[12].meta)==null?void 0:d.color)||"blue"),p(e,"class","svelte-15zdm0q")},m(d,_){P(d,e,_),O(e,l),pe(t,l,null),i[19](l),O(e,s),O(e,n),pe(a,n,null),O(e,r),pe(o,e,null),i[26](e),c=!0,u||(f=[J(l,"wheel",i[20],{passive:!0}),J(l,"scroll",i[21]),J(n,"wheel",i[22],{passive:!0}),J(e,"resize",i[14]),J(e,"scroll",i[23]),J(e,"touchmove",i[24],{passive:!0}),J(e,"click",i[25]),J(e,"keypress",i[17])],u=!0)},p(d,_){const y={};_&8&&(y.items=d[3]),_&128&&(y.scrollTopVal=d[7]),t.$set(y);const S={};_&8&&(S.items=d[3]),_&512&&(S.data=d[9]),_&1&&(S.screenSize=d[0]),_&32&&(S.essaysItems=d[5]),_&16&&(S.visibleItemsID=d[4]),a.$set(S)},i(d){c||(B(t.$$.fragment,d),B(a.$$.fragment,d),B(o.$$.fragment,d),c=!0)},o(d){F(t.$$.fragment,d),F(a.$$.fragment,d),F(o.$$.fragment,d),c=!1},d(d){d&&m(e),ge(t),i[19](null),ge(a),ge(o),i[26](null),u=!1,Se(f)}}}function Bl(i){let e,l,t,s;return{c(){e=L("article"),l=L("section"),t=L("h4"),s=Q("Loading..."),this.h()},l(n){e=N(n,"ARTICLE",{class:!0});var a=C(e);l=N(a,"SECTION",{class:!0});var r=C(l);t=N(r,"H4",{});var o=C(t);s=Z(o,"Loading..."),o.forEach(m),r.forEach(m),a.forEach(m),this.h()},h(){p(l,"class","short_text svelte-15zdm0q"),p(e,"class","svelte-15zdm0q")},m(n,a){P(n,e,a),O(e,l),O(l,t),O(t,s)},p:Y,i:Y,o:Y,d(n){n&&m(e)}}}function Fl(i){let e,l,t,s;return{c(){e=L("article"),l=L("section"),t=L("h4"),s=Q("404 Page not found"),this.h()},l(n){e=N(n,"ARTICLE",{class:!0});var a=C(e);l=N(a,"SECTION",{class:!0});var r=C(l);t=N(r,"H4",{});var o=C(t);s=Z(o,"404 Page not found"),o.forEach(m),r.forEach(m),a.forEach(m),this.h()},h(){p(l,"class","short_text svelte-15zdm0q"),p(e,"class","svelte-15zdm0q")},m(n,a){P(n,e,a),O(e,l),O(l,t),O(t,s)},p:Y,i:Y,o:Y,d(n){n&&m(e)}}}function Gl(i){var z,G;let e,l,t,s,n,a,r,o,c,u,f,d,_,y,S,A,D,V,h,g,k,I,E;return document.title=e=((G=(z=i[12])==null?void 0:z.meta)==null?void 0:G.title)||Ne,{c(){l=X(),t=L("meta"),s=X(),n=L("meta"),r=X(),o=L("meta"),c=X(),u=L("meta"),f=X(),d=L("meta"),_=X(),y=L("meta"),S=X(),A=L("meta"),V=X(),h=L("meta"),g=X(),k=L("meta"),I=X(),E=L("meta"),this.h()},l(b){l=H(b),t=N(b,"META",{name:!0,content:!0}),s=H(b),n=N(b,"META",{property:!0,content:!0}),r=H(b),o=N(b,"META",{property:!0,content:!0}),c=H(b),u=N(b,"META",{property:!0,content:!0}),f=H(b),d=N(b,"META",{property:!0,content:!0}),_=H(b),y=N(b,"META",{name:!0,content:!0}),S=H(b),A=N(b,"META",{property:!0,content:!0}),V=H(b),h=N(b,"META",{name:!0,content:!0}),g=H(b),k=N(b,"META",{name:!0,content:!0}),I=H(b),E=N(b,"META",{name:!0,content:!0}),this.h()},h(){var b,v,U,R,$,q,x,K,T,w,M,j,ne,ee,ie,ae;p(t,"name","description"),p(t,"content",((v=(b=i[12])==null?void 0:b.meta)==null?void 0:v.description)||Ge),p(n,"property","og:url"),p(n,"content",a=""+(i[8].url.origin+((U=i[12])==null?void 0:U.path))),p(o,"property","og:title"),p(o,"content",(($=(R=i[12])==null?void 0:R.meta)==null?void 0:$.title)||Ne),p(u,"property","og:description"),p(u,"content",((x=(q=i[12])==null?void 0:q.meta)==null?void 0:x.description)||Ge),p(d,"property","og:image"),p(d,"content",((T=(K=i[12])==null?void 0:K.meta)==null?void 0:T.cover)||Ye),p(y,"name","twitter:card"),p(y,"content","summary_large_image"),p(A,"property","twitter:url"),p(A,"content",D=i[8].url.origin+"/"+((w=i[12])==null?void 0:w.path)),p(h,"name","twitter:title"),p(h,"content",((j=(M=i[12])==null?void 0:M.meta)==null?void 0:j.title)||Ne),p(k,"name","twitter:description"),p(k,"content",((ee=(ne=i[12])==null?void 0:ne.meta)==null?void 0:ee.description)||Ge),p(E,"name","twitter:image"),p(E,"content",((ae=(ie=i[12])==null?void 0:ie.meta)==null?void 0:ae.cover)||Ye)},m(b,v){P(b,l,v),P(b,t,v),P(b,s,v),P(b,n,v),P(b,r,v),P(b,o,v),P(b,c,v),P(b,u,v),P(b,f,v),P(b,d,v),P(b,_,v),P(b,y,v),P(b,S,v),P(b,A,v),P(b,V,v),P(b,h,v),P(b,g,v),P(b,k,v),P(b,I,v),P(b,E,v)},p(b,v){var U,R,$,q;v&4096&&e!==(e=((R=(U=b[12])==null?void 0:U.meta)==null?void 0:R.title)||Ne)&&(document.title=e),v&256&&a!==(a=""+(b[8].url.origin+(($=b[12])==null?void 0:$.path)))&&p(n,"content",a),v&256&&D!==(D=b[8].url.origin+"/"+((q=b[12])==null?void 0:q.path))&&p(A,"content",D)},d(b){b&&m(l),b&&m(t),b&&m(s),b&&m(n),b&&m(r),b&&m(o),b&&m(c),b&&m(u),b&&m(f),b&&m(d),b&&m(_),b&&m(y),b&&m(S),b&&m(A),b&&m(V),b&&m(h),b&&m(g),b&&m(k),b&&m(I),b&&m(E)}}}function Ul(i){let e,l,t,s,n,a,r,o;Bt(i[18]);const c=[Fl,Bl,Vl],u=[];function f(_,y){return _[12]==null&&_[2]==null?0:_[2]==null?1:2}l=f(i),t=u[l]=c[l](i);let d=i[12]!=null&&Gl(i);return{c(){e=L("div"),t.c(),s=X(),d&&d.c(),n=W()},l(_){e=N(_,"DIV",{});var y=C(e);t.l(y),y.forEach(m),s=H(_);const S=Ft("svelte-185b2j7",document.head);d&&d.l(S),n=W(),S.forEach(m)},m(_,y){P(_,e,y),u[l].m(e,null),P(_,s,y),d&&d.m(document.head,null),O(document.head,n),a=!0,r||(o=[J(window,"resize",i[14]),J(window,"click",i[14]),J(window,"resize",i[18])],r=!0)},p(_,[y]){let S=l;l=f(_),l===S?u[l].p(_,y):(oe(),F(u[S],1,1,()=>{u[S]=null}),fe(),t=u[l],t?t.p(_,y):(t=u[l]=c[l](_),t.c()),B(t,1),t.m(e,null)),_[12]!=null&&d.p(_,y)},i(_){a||(B(t),a=!0)},o(_){F(t),a=!1},d(_){_&&m(e),u[l].d(),_&&m(s),d&&d.d(_),m(n),r=!1,Se(o)}}}function Wl(i,e,l){let t,s,n,a,r,o;se(i,Jt,q=>l(8,t=q)),se(i,Qe,q=>l(9,s=q)),se(i,Ve,q=>l(16,n=q)),se(i,qe,q=>l(10,r=q)),se(i,Pe,q=>l(11,o=q));let{data:c}=e,u,f,d=[...c.posts].find(q=>q.path.includes(t.params.slug)),_,y,S=[],A=[],D,V;const h=be(!1);se(i,h,q=>l(27,a=q));const g=()=>{le(h,a=!0,a)};Je(async()=>{l(3,y=await ml(d.text)),l(4,S=y.filter(x=>!x.set).map(x=>{var K;return`${ue}/resources/${(K=x.data)==null?void 0:K["o:id"]}`})),l(2,_=await zt(y)),le(Qe,s=_,s);const q=localStorage.getItem("selectedLanguage");l(5,A=c.posts.reduce((x,K)=>(!K.path.includes(t.params.slug)&&K.meta.lang==q&&K.links.map(T=>{const w=x.find(j=>j.id===T),M={title:K.meta.title,url:K.path};w?w.essays.some(j=>j.title===M.title&&j.url===M.url)||w.essays.push(M):x.push({id:T,essays:[M]})}),x),[]))});function k(q){ze.call(this,i,q)}function I(){l(0,u=window.innerWidth)}function E(q){ye[q?"unshift":"push"](()=>{f=q,l(1,f)})}const z=()=>{g(),le(Pe,o=!1,o),l(7,V=f==null?void 0:f.scrollTop)},G=()=>{u<1e3&&(g(),l(7,V=f==null?void 0:f.scrollTop),le(Pe,o=!1,o))},b=()=>{u>1e3&&le(Pe,o=!0,o)},v=()=>{le(qe,r=D==null?void 0:D.scrollLeft,r)},U=()=>{le(qe,r=D==null?void 0:D.scrollLeft,r),g()},R=()=>{g()};function $(q){ye[q?"unshift":"push"](()=>{D=q,l(6,D)})}return i.$$set=q=>{"data"in q&&l(15,c=q.data)},i.$$.update=()=>{i.$$.dirty&65536&&g()},[u,f,_,y,S,A,D,V,t,s,r,o,d,h,g,c,n,k,I,E,z,G,b,v,U,R,$]}class Rl extends Ie{constructor(e){super(),we(this,e,Wl,Ul,Ee,{data:15})}}export{Rl as component,Zl as universal};
