import{_ as Gt}from"../chunks/preload-helper.41c905a7.js";import{S as Te,i as De,s as Le,k as N,q as $,a as J,l as z,m as C,r as x,h as p,c as Y,n as m,b as P,G as O,u as _e,H as j,I as ie,o as Ke,R as se,L as Ve,M as K,T as Qe,N as Me,j as qt,U as Mt,e as W,J as Oe,V as We,W as Fe,w as Se,K as Xe,g as B,v as fe,d as U,f as ue,y as me,z as pe,A as ge,B as be,X as Ee,Y as Pe,Z as He,_ as Ut,O as Wt,$ as Xt,p as $e}from"../chunks/index.19860723.js";import{b as ce,m as Ht,e as Jt,t as ze,a as Ae,i as Be,c as Yt}from"../chunks/setup.158a0fb1.js";import{w as ve,e as Qt}from"../chunks/singletons.d174a256.js";import{p as Zt}from"../chunks/stores.e4fc887d.js";const Rt=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/template.md":()=>Gt(()=>import("../chunks/template.14419409.js"),["../chunks/template.14419409.js","../chunks/index.19860723.js"],import.meta.url)}));return await Promise.all(e.map(async([t,s])=>{const n=await s(),{html:a}=n.default.render(),r=t.slice(17,-3),f=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,c=[...a.matchAll(f)].map(u=>u[2]).filter(u=>!u.startsWith("http")).map(u=>{const o=u.lastIndexOf("/");return o!==-1?u.substring(o+1):u});return{meta:n.metadata,path:r,text:a,links:c}}))},Kt=async({fetch:i})=>({posts:await(await i("/api/posts")).json()}),jt=async()=>(await Rt()).sort().map(l=>({slug:l.path.replaceAll("/","")})),Kl=Object.freeze(Object.defineProperty({__proto__:null,entries:jt,load:Kt},Symbol.toStringTag,{value:"Module"})),Ze=ve(""),Je=ve(""),qe=ve(!1),xe=ve([]),de=ve([]),Ge=ve([]),Ue=ve(0);function et(i){var s;let e,l=((s=i[0].meta)==null?void 0:s.description)+"",t;return{c(){e=N("div"),t=$(l),this.h()},l(n){e=z(n,"DIV",{class:!0});var a=C(e);t=x(a,l),a.forEach(p),this.h()},h(){m(e,"class","description svelte-go6mrx")},m(n,a){P(n,e,a),O(e,t)},p(n,a){var r;a&1&&l!==(l=((r=n[0].meta)==null?void 0:r.description)+"")&&_e(t,l)},d(n){n&&p(e)}}}function tt(i){let e,l=i[0].meta.author+"",t;return{c(){e=N("div"),t=$(l),this.h()},l(s){e=z(s,"DIV",{class:!0});var n=C(e);t=x(n,l),n.forEach(p),this.h()},h(){m(e,"class","author svelte-go6mrx")},m(s,n){P(s,e,n),O(e,t)},p(s,n){n&1&&l!==(l=s[0].meta.author+"")&&_e(t,l)},d(s){s&&p(e)}}}function lt(i){var s;let e,l=((s=new Date(i[0].meta.date))==null?void 0:s.toLocaleDateString(i[0].meta.lang))+"",t;return{c(){e=N("div"),t=$(l),this.h()},l(n){e=z(n,"DIV",{class:!0});var a=C(e);t=x(a,l),a.forEach(p),this.h()},h(){m(e,"class","date svelte-go6mrx")},m(n,a){P(n,e,a),O(e,t)},p(n,a){var r;a&1&&l!==(l=((r=new Date(n[0].meta.date))==null?void 0:r.toLocaleDateString(n[0].meta.lang))+"")&&_e(t,l)},d(n){n&&p(e)}}}function $t(i){var q,D,M;let e,l,t,s,n=i[0].meta.title+"",a,r,f,c,u,o,d,_=((q=i[0].meta)==null?void 0:q.description)&&et(i),y=((D=i[0].meta)==null?void 0:D.author)&&tt(i),S=((M=i[0].meta)==null?void 0:M.date)&&lt(i);return{c(){e=N("a"),l=$("← Index"),t=J(),s=N("h1"),a=$(n),r=J(),_&&_.c(),f=J(),c=N("div"),y&&y.c(),u=J(),S&&S.c(),o=J(),d=N("div"),this.h()},l(h){e=z(h,"A",{href:!0,class:!0,rel:!0});var g=C(e);l=x(g,"← Index"),g.forEach(p),t=Y(h),s=z(h,"H1",{class:!0});var v=C(s);a=x(v,n),v.forEach(p),r=Y(h),_&&_.l(h),f=Y(h),c=z(h,"DIV",{class:!0});var I=C(c);y&&y.l(I),u=Y(I),S&&S.l(I),I.forEach(p),o=Y(h),d=z(h,"DIV",{class:!0});var E=C(d);E.forEach(p),this.h()},h(){m(e,"href",Qt),m(e,"class","index svelte-go6mrx"),m(e,"rel","noopener noreferrer"),m(s,"class","svelte-go6mrx"),m(c,"class","metadata svelte-go6mrx"),m(d,"class","markdown svelte-go6mrx")},m(h,g){P(h,e,g),O(e,l),P(h,t,g),P(h,s,g),O(s,a),P(h,r,g),_&&_.m(h,g),P(h,f,g),P(h,c,g),y&&y.m(c,null),O(c,u),S&&S.m(c,null),P(h,o,g),P(h,d,g),d.innerHTML=i[1]},p(h,[g]){var v,I,E;g&1&&n!==(n=h[0].meta.title+"")&&_e(a,n),(v=h[0].meta)!=null&&v.description?_?_.p(h,g):(_=et(h),_.c(),_.m(f.parentNode,f)):_&&(_.d(1),_=null),(I=h[0].meta)!=null&&I.author?y?y.p(h,g):(y=tt(h),y.c(),y.m(c,u)):y&&(y.d(1),y=null),(E=h[0].meta)!=null&&E.date?S?S.p(h,g):(S=lt(h),S.c(),S.m(c,null)):S&&(S.d(1),S=null)},i:j,o:j,d(h){h&&p(e),h&&p(t),h&&p(s),h&&p(r),_&&_.d(h),h&&p(f),h&&p(c),y&&y.d(),S&&S.d(),h&&p(o),h&&p(d)}}}const xt=/\[\^([^\]]+)\]/g;let el=100;function tl(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),i.currentTarget.classList.add("hover")}function ll(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),i.currentTarget.classList.remove("hover")}function sl(i,e,l){const t=l-e;return(i-e)/t*100}function il(i,e,l){const t=l-e;return e+t*i/100}function nl(i,e,l){let t,s;ie(i,qe,h=>l(8,t=h)),ie(i,Ze,h=>l(9,s=h));let{data:n}=e,{items:a}=e,{scrollTopVal:r}=e,f=n.text,c=1;const o=f.replace(/<a\s+href="([^"]+)"\s*>([^<]+)<\/a>/g,(h,g,v)=>{if(g.startsWith("http"))return`<a class="external" target="_blank" href="${g}" title="${v}">${v}</a>`;{let I=g.split("/")[1];return`<a class="node-highlite" unique-id="${I}" id="${g.split("/")[1]}"
				data-id="${g.split("/")[1]}" title="${v}">${v}
				<span class="symbol node" unique-id="${I}" data-id="item_${g.split("/")[1]}"
				data-class="${a.filter(E=>E.label==v).map(E=>{var L,G;return(G=(L=E.data)==null?void 0:L["@type"])==null?void 0:G[1]})}">
					●
					</span></a>`}}).replace(xt,(h,g)=>{const v=c++;return`<sup id="fn-${v}"><a href="#fnref-${v}">${v}</a></sup><span id="fn-${v}-content">${g}</span>`}),d=Array.from({length:c-1},(h,g)=>{var E;const v=g+1,I=(E=o.match(new RegExp(`<span id="fn-${v}-content">([^<]+)</span>`)))==null?void 0:E[1];return`<li id="fnref-${v}"> ${I}</li>`}).join(""),_=`${o}
	<ol class="biblio">${d}</ol>`;let y;Ke(async()=>{l(4,y=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),q(y),y.forEach(h=>{h.addEventListener("mouseenter",tl),h.addEventListener("mouseleave",ll),h.addEventListener("click",S)})});function S(h){y.forEach(I=>{const E=I.getAttribute("data-id"),L=document.querySelector(`.node[data-id="${E}"]`);L&&L.classList.remove("clicked"),I.classList.remove("clicked")});const g=h.currentTarget.getAttribute("data-id"),v=document.querySelector(`.node[data-id="${g}"]`);v&&v.classList.toggle("clicked"),h.currentTarget.classList.toggle("clicked"),se(Ze,s=g,s)}function q(h){let g=null;l(4,y=Array.from(h).map(v=>{let I=v.offsetTop;return g!==null&&I<=g?v.adjustedOffsetTop=g+el:v.adjustedOffsetTop=I,g=v.adjustedOffsetTop,v}))}let D=0;function M(h,g){var v,I,E,L,G,F;if(!t){let T=(v=h==null?void 0:h[D])==null?void 0:v.adjustedOffsetTop,X=(I=h==null?void 0:h[D+1])==null?void 0:I.adjustedOffsetTop,Z=(E=h==null?void 0:h[D])==null?void 0:E.getAttribute("data-id"),le=(L=h==null?void 0:h[D+1])==null?void 0:L.getAttribute("data-id"),V=(G=document.querySelector(`.node[data-id="${Z}"]`))==null?void 0:G.offsetTop,ee=(F=document.querySelector(`.node[data-id="${le}"]`))==null?void 0:F.offsetTop,b=sl(g,T,X),k=il(b,V,ee);g>X&&D++,g<T&&D!=0&&D--;const w=document.querySelector(".links:first-of-type");T&&X&&w&&b&&k&&(w==null||w.scrollTo({top:k}))}}return i.$$set=h=>{"data"in h&&l(0,n=h.data),"items"in h&&l(2,a=h.items),"scrollTopVal"in h&&l(3,r=h.scrollTopVal)},i.$$.update=()=>{i.$$.dirty&24&&M(y,r)},[n,_,a,r,y]}class al extends Te{constructor(e){super(),De(this,e,nl,$t,Le,{data:0,items:2,scrollTopVal:3})}}function st(i,e,l){const t=i.slice();return t[27]=e[l],t}function rl(i){let e,l=(i[0].title||"")+"",t;return{c(){e=N("div"),t=$(l),this.h()},l(s){e=z(s,"DIV",{class:!0});var n=C(e);t=x(n,l),n.forEach(p),this.h()},h(){m(e,"class","title svelte-x5b8hf")},m(s,n){P(s,e,n),O(e,t)},p(s,n){n&1&&l!==(l=(s[0].title||"")+"")&&_e(t,l)},d(s){s&&p(e)}}}function ol(i){let e,l,t,s,n,a=(i[0].title||"")+"",r,f,c;return{c(){e=N("img"),s=J(),n=N("div"),r=$(a),this.h()},l(u){e=z(u,"IMG",{src:!0,alt:!0,class:!0}),s=Y(u),n=z(u,"DIV",{class:!0});var o=C(n);r=x(o,a),o.forEach(p),this.h()},h(){Xe(e.src,l=i[5])||m(e,"src",l),m(e,"alt",t=i[0].title),m(e,"class","svelte-x5b8hf"),m(n,"class","title svelte-x5b8hf")},m(u,o){P(u,e,o),P(u,s,o),P(u,n,o),O(n,r),f||(c=K(e,"load",i[11]),f=!0)},p(u,o){o&32&&!Xe(e.src,l=u[5])&&m(e,"src",l),o&1&&t!==(t=u[0].title)&&m(e,"alt",t),o&1&&a!==(a=(u[0].title||"")+"")&&_e(r,a)},d(u){u&&p(e),u&&p(s),u&&p(n),f=!1,c()}}}function fl(i){let e,l,t,s,n,a=i[0].title+"",r,f,c;return{c(){e=N("img"),s=J(),n=N("div"),r=$(a),this.h()},l(u){e=z(u,"IMG",{src:!0,alt:!0,class:!0}),s=Y(u),n=z(u,"DIV",{class:!0});var o=C(n);r=x(o,a),o.forEach(p),this.h()},h(){Xe(e.src,l=i[0].img.replace("square","large"))||m(e,"src",l),m(e,"alt",t=i[0].title),m(e,"class","svelte-x5b8hf"),m(n,"class","title svelte-x5b8hf")},m(u,o){P(u,e,o),P(u,s,o),P(u,n,o),O(n,r),f||(c=K(e,"load",i[11]),f=!0)},p(u,o){o&1&&!Xe(e.src,l=u[0].img.replace("square","large"))&&m(e,"src",l),o&1&&t!==(t=u[0].title)&&m(e,"alt",t),o&1&&a!==(a=u[0].title+"")&&_e(r,a)},d(u){u&&p(e),u&&p(s),u&&p(n),f=!1,c()}}}function it(i){let e,l=i[8].essays,t=[];for(let s=0;s<l.length;s+=1)t[s]=nt(st(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let a=0;a<t.length;a+=1)t[a].m(s,n);P(s,e,n)},p(s,n){if(n&256){l=s[8].essays;let a;for(a=0;a<l.length;a+=1){const r=st(s,l,a);t[a]?t[a].p(r,n):(t[a]=nt(r),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(s){Oe(t,s),s&&p(e)}}}function nt(i){let e,l,t,s=i[27].title+"",n,a;return{c(){e=N("a"),l=$("→"),t=N("em"),n=$(s),this.h()},l(r){e=z(r,"A",{class:!0,href:!0,target:!0,rel:!0});var f=C(e);l=x(f,"→"),t=z(f,"EM",{});var c=C(t);n=x(c,s),c.forEach(p),f.forEach(p),this.h()},h(){m(e,"class","link svelte-x5b8hf"),m(e,"href",a=i[27].url),m(e,"target","_blank"),m(e,"rel","noopener noreferrer")},m(r,f){P(r,e,f),O(e,l),O(e,t),O(t,n)},p(r,f){f&256&&s!==(s=r[27].title+"")&&_e(n,s),f&256&&a!==(a=r[27].url)&&m(e,"href",a)},d(r){r&&p(e)}}}function at(i){let e;function l(n,a){return n[0].title==null||n[0].title.length==1?cl:ul}let t=l(i),s=t(i);return{c(){s.c(),e=W()},l(n){s.l(n),e=W()},m(n,a){s.m(n,a),P(n,e,a)},p(n,a){t===(t=l(n))&&s?s.p(n,a):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s.d(n),n&&p(e)}}}function ul(i){let e,l,t;return{c(){e=N("a"),l=$("→ Metadata"),this.h()},l(s){e=z(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=C(e);l=x(n,"→ Metadata"),n.forEach(p),this.h()},h(){m(e,"class","link svelte-x5b8hf"),m(e,"href",t=`${i[3]}/item/${i[4]}`),m(e,"target","_blank"),m(e,"rel","noopener noreferrer")},m(s,n){P(s,e,n),O(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/item/${s[4]}`)&&m(e,"href",t)},d(s){s&&p(e)}}}function cl(i){let e,l,t;return{c(){e=N("a"),l=$("→ Metadata"),this.h()},l(s){e=z(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=C(e);l=x(n,"→ Metadata"),n.forEach(p),this.h()},h(){m(e,"class","link svelte-x5b8hf"),m(e,"href",t=`${i[3]}/media/${i[4]}`),m(e,"target","_blank"),m(e,"rel","noopener noreferrer")},m(s,n){P(s,e,n),O(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/media/${s[4]}`)&&m(e,"href",t)},d(s){s&&p(e)}}}function dl(i){let e,l,t,s,n,a;function r(d,_){return d[0].img?fl:d[5]?ol:rl}let f=r(i),c=f(i),u=i[8]!=null&&it(i),o=i[3]&&at(i);return{c(){e=N("div"),c.c(),l=J(),u&&u.c(),t=J(),o&&o.c(),this.h()},l(d){e=z(d,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var _=C(e);c.l(_),l=Y(_),u&&u.l(_),t=Y(_),o&&o.l(_),_.forEach(p),this.h()},h(){m(e,"class","node svelte-x5b8hf"),m(e,"title",s=i[0].title),m(e,"source",i[9]),m(e,"target",i[4]),m(e,"data-id",i[4]),Ve(e,"selected",i[7]),Ve(e,"linkToEssay",i[8]!=null)},m(d,_){P(d,e,_),c.m(e,null),O(e,l),u&&u.m(e,null),O(e,t),o&&o.m(e,null),i[21](e),n||(a=[K(e,"mouseover",i[22]),K(e,"mouseleave",function(){Qe(i[13](i[4]))&&i[13](i[4]).apply(this,arguments)}),K(e,"click",i[18]),K(e,"keydown",i[19]),K(e,"focus",i[20])],n=!0)},p(d,[_]){i=d,f===(f=r(i))&&c?c.p(i,_):(c.d(1),c=f(i),c&&(c.c(),c.m(e,l))),i[8]!=null?u?u.p(i,_):(u=it(i),u.c(),u.m(e,t)):u&&(u.d(1),u=null),i[3]?o?o.p(i,_):(o=at(i),o.c(),o.m(e,null)):o&&(o.d(1),o=null),_&1&&s!==(s=i[0].title)&&m(e,"title",s),_&512&&m(e,"source",i[9]),_&16&&m(e,"target",i[4]),_&16&&m(e,"data-id",i[4]),_&128&&Ve(e,"selected",i[7]),_&256&&Ve(e,"linkToEssay",i[8]!=null)},i:j,o:j,d(d){d&&p(e),c.d(),u&&u.d(),o&&o.d(),i[21](null),n=!1,Me(a)}}}function _l(i,e,l){let t,s,n,a,r,f,c=j,u=()=>(c(),c=We(D,k=>l(17,f=k)),D),o,d=j,_=()=>(d(),d=We(M,k=>l(24,o=k)),M),y,S;ie(i,de,k=>l(16,r=k)),ie(i,Ze,k=>l(25,y=k)),ie(i,Je,k=>l(10,S=k)),i.$$.on_destroy.push(()=>c()),i.$$.on_destroy.push(()=>d());let{datum:q}=e,{entities:D}=e;u();let{updatePosition:M}=e;_();let{essaysItems:h}=e,{site:g}=e,{openNode:v}=e,I,E=null;qt(()=>{const k=q.source;k==`item_${y}`&&k!=E&&v(q,1),E=`item_${y}`}),Mt(()=>{se(M,o=!0,o)});function L(){se(M,o=!0,o)}function G(k){var Q;const w=k.split("/"),A=f.find(ne=>ne["o:id"]==w.slice(-1)[0]);return(Q=A==null?void 0:A.thumbnail_display_urls)==null?void 0:Q.large}let F;function T(k){const w=k,A=document.querySelector(`.node-highlite[data-id="${w}"]`);A&&A.classList.add("hover"),F.classList.add("hover")}function X(k){const w=k,A=document.querySelector(`.node-highlite[data-id="${w}"]`);A&&A.classList.remove("hover"),F.classList.remove("hover")}function Z(k){Fe.call(this,i,k)}function le(k){Fe.call(this,i,k)}function V(k){Fe.call(this,i,k)}function ee(k){Se[k?"unshift":"push"](()=>{F=k,l(6,F)})}const b=()=>{se(Je,S=s,S),T(s)};return i.$$set=k=>{"datum"in k&&l(0,q=k.datum),"entities"in k&&u(l(1,D=k.entities)),"updatePosition"in k&&_(l(2,M=k.updatePosition)),"essaysItems"in k&&l(14,h=k.essaysItems),"site"in k&&l(3,g=k.site),"openNode"in k&&l(15,v=k.openNode)},i.$$.update=()=>{i.$$.dirty&131073&&f&&l(5,I=G(q.target)),i.$$.dirty&1&&l(9,t=q.source.split("/").slice(-1)[0]),i.$$.dirty&1&&l(4,s=q.target.split("/").slice(-1)[0]),i.$$.dirty&16400&&l(8,n=h.find(k=>k.id==s)),i.$$.dirty&65537&&l(7,a=r.some(k=>(k==null?void 0:k.id)==q.target))},[q,D,M,g,s,I,F,a,n,t,S,L,T,X,h,v,r,f,Z,le,V,ee,b]}class Ot extends Te{constructor(e){super(),De(this,e,_l,dl,Le,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}var hl=0;function ml(){return++hl}var Re=Function("return this")();typeof Re.__nextId!="function"&&(Re.__nextId=ml);function Ct(){return"uid-"+Re.__nextId()}function pl(i){let e,l,t;return{c(){e=N("div"),this.h()},l(s){e=z(s,"DIV",{source:!0,target:!0}),C(e).forEach(p),this.h()},h(){m(e,"source",l=i[0].source.split("/").slice(-1)[0]),m(e,"target",t=i[0].target.split("/").slice(-1)[0])},m(s,n){P(s,e,n),i[8](e)},p(s,[n]){n&1&&l!==(l=s[0].source.split("/").slice(-1)[0])&&m(e,"source",l),n&1&&t!==(t=s[0].target.split("/").slice(-1)[0])&&m(e,"target",t)},i:j,o:j,d(s){s&&p(e),i[8](null)}}}let rt=0;function gl(i,e,l){let t,s,n,a,r=j,f=()=>(r(),r=We(_,h=>l(5,a=h)),_),c,u;ie(i,Ge,h=>l(12,n=h)),ie(i,Ue,h=>l(6,c=h)),ie(i,de,h=>l(7,u=h)),i.$$.on_destroy.push(()=>r());let{datum:o}=e,{label:d}=e,{updatePosition:_}=e;f();let y,S=Ct();function q(h,g=0,v){const I=h.split("/").slice(-1)[0],E=[...document.querySelectorAll(`.node[data-id="${I}"]`)],L=[];return E.forEach(G=>{const F=G.getBoundingClientRect(),T={x:F.x+c,y:F.y+g,width:F.width-g/2,height:F.height,selected:"selected"};L.push(T)}),L}function D(){delete n[S],se(_,a=!1,a);const h=q(o.source,rt),g=q(o.target,rt);y&&(y.getBoundingClientRect().x,y.getBoundingClientRect().y),h.forEach(v=>{g.forEach(I=>{let E=100;const L=v==null?void 0:v.selected;let G,F,T,X,Z;G=v.x+v.width,F=v.y,T=I.x,X=I.y,I.x<v.x||I.x==v.x?Z=I.x-E*5:I.x==v.x?Z=I.x-E*3:Z=I.x-E,o.source.includes("item_")&&(Z=I.x-E);const le=G+E,V=F,ee=I.y,b=`M${G},${F}C${le},${V} ${Z},${ee} ${T},${X}`;se(Ge,n[S]=n[S]||[],n),n[S].push({class:s,d:b,label:d,selected:L,datum:{source:o.source.split("/").at(-1),target:o.target.split("/").at(-1)},reverse:o==null?void 0:o.reverse})})})}Mt(()=>{delete n[S],se(Ge,n=[],n)});function M(h){Se[h?"unshift":"push"](()=>{y=h,l(2,y)})}return i.$$set=h=>{"datum"in h&&l(0,o=h.datum),"label"in h&&l(3,d=h.label),"updatePosition"in h&&f(l(1,_=h.updatePosition))},i.$$.update=()=>{i.$$.dirty&96&&D(),i.$$.dirty&128&&l(4,t=u.slice(-1)[0].id),i.$$.dirty&17&&(s=o.target==t||o.source==t?"highlite":"")},[o,_,y,d,t,a,c,u,M]}class Vt extends Te{constructor(e){super(),De(this,e,gl,pl,Le,{datum:0,label:3,updatePosition:1})}}new TextEncoder;async function bl(i){const e=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,l=[],t=[],s=[],n=[];let a;for(;a=e.exec(i);)if(!a[2].includes("http")){const h=a[3],g=a[2];g.includes("item/")&&l.push(g.split("/")[1]),g.includes("set/")&&s.push(g.split("/")[1]),g.includes("media/")&&t.push(g.split("/")[1]),n.push({label:h,id:g.split("/")[1]})}const r=Jt,c=M(l,r).map(h=>{const g=`${ce}/items?${h.map(v=>`id[]=${v}`).join("&")}`;return fetch(g).then(v=>v.json())}),o=M(s,r).map(h=>{const g=`${ce}/item_sets?${h.map(v=>`id[]=${v}`).join("&")}`;return fetch(g).then(v=>v.json())}),_=M(t,r).map(h=>{const g=`${ce}/media?${h.map(v=>`id[]=${v}`).join("&")}`;return fetch(g).then(v=>v.json())}),y=await Promise.all(c),S=await Promise.all(o),q=await Promise.all(_),D=[...y.flat(),...q.flat(),...S.flat()];for(let h=0;h<D.length;h++){const g=n.find(I=>D[h]["o:id"]==I.id),v=D[h];g.uniqueId=Ct(),g.data=v}return n;function M(h,g){const v=[];for(let I=0;I<h.length;I+=g)v.push(h.slice(I,I+g));return v}}async function Bt(i){let e=[];for(let t=0;t<i.length;t++)if(i[t].data){let s=i[t].data,n=i[t].set||null,a=vl(s,n);e=[...e,...a]}return{...{nodes:e.reduce((t,s)=>(t.find(n=>n.id===s.source)||t.push({id:s.source,title:s.title}),t.find(n=>n.id===s.target)||t.push({id:s.target,title:s.title}),t),[]),links:e}}}function vl(i,e){var f;let l=[],t=`${ce}/resources/${i["o:id"]}`;e&&l.push({source:`${ce}/resources/${e.id}`,target:t,img:(f=i==null?void 0:i.thumbnail_display_urls)==null?void 0:f.large,title:i["o:title"]});let s,n=!1;const a=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/;let r=async function(c){var u,o,d,_,y,S,q,D,M,h,g,v;for(let I in c)if(I==="@id"&&c[I].startsWith(ce)&&(c["o:title"]||c.display_title||n==!0)){let E=c[I].split("/").pop(),L=`${ce}/resources/${E}`;const G=c["o:title"]||c.display_title,F=(c==null?void 0:c.thumbnail_url)||((u=c==null?void 0:c.thumbnail_display_urls)==null?void 0:u.large),T=l.some(le=>le.source===t&&le.target===L);let X=((d=(o=c.property_label)==null?void 0:o.replace("_"," "))==null?void 0:d.replace(a,""))||(s==null?void 0:s.replace(a,""));const Z=Ht.map(le=>le.props.includes(X)?le.key:"").find(Boolean);T||l.push({source:t,target:L,title:G,img:F,property:X,category:Z,reverse:n})}else if(I==="@id"&&!c[I].startsWith(ce)&&c["o:label"]){let E=((y=(_=c.property_label)==null?void 0:_.replace("_"," "))==null?void 0:y.replace(a,""))||(s==null?void 0:s.replace(a,""));l.push({source:t,target:c[I],title:c["o:label"],property:E,category:"",external:!0,reverse:n})}else if(I==="@id"&&s=="media"&&t.split("/").pop()!=((S=c==null?void 0:c["o:primary_media"])==null?void 0:S["@id"].split("/").pop())){let E=((D=(q=c.property_label)==null?void 0:q.replace("_"," "))==null?void 0:D.replace(a,""))||(s==null?void 0:s.replace(a,"")),L=c[I].split("/").pop(),G=`${ce}/resources/${L}`;l.push({source:t,target:G,title:(c==null?void 0:c["o:label"])||" ",property:E,category:"",reverse:n})}else if(I==="@id"&&s=="item"){let E=((h=(M=c.property_label)==null?void 0:M.replace("_"," "))==null?void 0:h.replace(a,""))||(s==null?void 0:s.replace(a,"")),L=c[I].split("/").pop(),G=`${ce}/resources/${L}`;l.push({source:t,target:G,title:(c==null?void 0:c["o:label"])||" ",property:E,category:"",reverse:n})}else typeof c[I]=="object"&&(isNaN(I)&&(s=(v=(g=(I==null?void 0:I.split(":"))[1])==null?void 0:g.split("_"))==null?void 0:v.join(" "),I=="@reverse"&&(n=!0)),r(c[I]))};return r(i),l}function ot(i,e,l){const t=i.slice();return t[22]=e[l],t}function ft(i){let e,l;return{c(){e=N("div"),l=$("Loading..."),this.h()},l(t){e=z(t,"DIV",{class:!0});var s=C(e);l=x(s,"Loading..."),s.forEach(p),this.h()},h(){m(e,"class","loading svelte-1kyenid")},m(t,s){P(t,e,s),O(e,l)},d(t){t&&p(e)}}}function ut(i){let e,l,t=i[0],s=[];for(let a=0;a<t.length;a+=1)s[a]=dt(ot(i,t,a));const n=a=>U(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=W()},l(a){for(let r=0;r<s.length;r+=1)s[r].l(a);e=W()},m(a,r){for(let f=0;f<s.length;f+=1)s[f].m(a,r);P(a,e,r),l=!0},p(a,r){if(r&639){t=a[0];let f;for(f=0;f<t.length;f+=1){const c=ot(a,t,f);s[f]?(s[f].p(c,r),B(s[f],1)):(s[f]=dt(c),s[f].c(),B(s[f],1),s[f].m(e.parentNode,e))}for(fe(),f=t.length;f<s.length;f+=1)n(f);ue()}},i(a){if(!l){for(let r=0;r<t.length;r+=1)B(s[r]);l=!0}},o(a){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)U(s[r]);l=!1},d(a){Oe(s,a),a&&p(e)}}}function kl(i){var t;let e,l;return e=new Vt({props:{datum:i[22],updatePosition:i[3],label:((t=i[22])==null?void 0:t.property)||""}}),{c(){me(e.$$.fragment)},l(s){pe(e.$$.fragment,s)},m(s,n){ge(e,s,n),l=!0},p(s,n){var r;const a={};n&1&&(a.datum=s[22]),n&8&&(a.updatePosition=s[3]),n&1&&(a.label=((r=s[22])==null?void 0:r.property)||""),e.$set(a)},i(s){l||(B(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){be(e,s)}}}function yl(i){let e,l,t=i[22].source!=i[22].target&&ct(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[22].source!=s[22].target?t?(t.p(s,n),n&1&&B(t,1)):(t=ct(s),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ue())},i(s){l||(B(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&p(e)}}}function ct(i){var c;let e,l,t,s,n;const a=[wl,Il],r=[];function f(u,o){var d;return(d=u[22])!=null&&d.external?1:0}return e=f(i),l=r[e]=a[e](i),s=new Vt({props:{datum:i[22],updatePosition:i[3],label:((c=i[22])==null?void 0:c.property)||""}}),{c(){l.c(),t=J(),me(s.$$.fragment)},l(u){l.l(u),t=Y(u),pe(s.$$.fragment,u)},m(u,o){r[e].m(u,o),P(u,t,o),ge(s,u,o),n=!0},p(u,o){var y;let d=e;e=f(u),e===d?r[e].p(u,o):(fe(),U(r[d],1,1,()=>{r[d]=null}),ue(),l=r[e],l?l.p(u,o):(l=r[e]=a[e](u),l.c()),B(l,1),l.m(t.parentNode,t));const _={};o&1&&(_.datum=u[22]),o&8&&(_.updatePosition=u[3]),o&1&&(_.label=((y=u[22])==null?void 0:y.property)||""),s.$set(_)},i(u){n||(B(l),B(s.$$.fragment,u),n=!0)},o(u){U(l),U(s.$$.fragment,u),n=!1},d(u){r[e].d(u),u&&p(t),be(s,u)}}}function Il(i){let e,l,t,s;return l=new Ot({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),{c(){e=N("a"),me(l.$$.fragment),this.h()},l(n){e=z(n,"A",{href:!0,target:!0,rel:!0});var a=C(e);pe(l.$$.fragment,a),a.forEach(p),this.h()},h(){m(e,"href",t=i[22].target),m(e,"target","_blank"),m(e,"rel","noreferrer")},m(n,a){P(n,e,a),ge(l,e,null),s=!0},p(n,a){const r={};a&64&&(r.site=n[6]),a&4&&(r.entities=n[2]),a&8&&(r.updatePosition=n[3]),a&1&&(r.datum=n[22]),a&32&&(r.essaysItems=n[5]),l.$set(r),(!s||a&1&&t!==(t=n[22].target))&&m(e,"href",t)},i(n){s||(B(l.$$.fragment,n),s=!0)},o(n){U(l.$$.fragment,n),s=!1},d(n){n&&p(e),be(l)}}}function wl(i){let e,l;function t(){return i[16](i[22])}function s(){return i[17](i[22])}return e=new Ot({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),e.$on("click",t),e.$on("keydown",s),{c(){me(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,a){ge(e,n,a),l=!0},p(n,a){i=n;const r={};a&64&&(r.site=i[6]),a&4&&(r.entities=i[2]),a&8&&(r.updatePosition=i[3]),a&1&&(r.datum=i[22]),a&32&&(r.essaysItems=i[5]),e.$set(r)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){U(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function dt(i){let e,l,t,s,n;function a(...u){return i[15](i[22],...u)}const r=[yl,kl],f=[];function c(u,o){return o&3&&(e=null),e==null&&(e=!!u[1].some(a)),e?0:u[22].source&&u[22].target&&u[22].source!=u[22].target?1:-1}return~(l=c(i,-1))&&(t=f[l]=r[l](i)),{c(){t&&t.c(),s=W()},l(u){t&&t.l(u),s=W()},m(u,o){~l&&f[l].m(u,o),P(u,s,o),n=!0},p(u,o){i=u;let d=l;l=c(i,o),l===d?~l&&f[l].p(i,o):(t&&(fe(),U(f[d],1,1,()=>{f[d]=null}),ue()),~l?(t=f[l],t?t.p(i,o):(t=f[l]=r[l](i),t.c()),B(t,1),t.m(s.parentNode,s)):t=null)},i(u){n||(B(t),n=!0)},o(u){U(t),n=!1},d(u){~l&&f[l].d(u),u&&p(s)}}}function El(i){let e,l,t,s=i[0]&&typeof i[0]=="object"&&Object.keys(i[0]).length>0,n,a=i[8]&&ft(),r=s&&ut(i);return{c(){e=N("section"),a&&a.c(),l=J(),t=N("div"),r&&r.c()},l(f){e=z(f,"SECTION",{});var c=C(e);a&&a.l(c),l=Y(c),t=z(c,"DIV",{});var u=C(t);r&&r.l(u),u.forEach(p),c.forEach(p)},m(f,c){P(f,e,c),a&&a.m(e,null),O(e,l),O(e,t),r&&r.m(t,null),i[18](e),n=!0},p(f,[c]){f[8]?a||(a=ft(),a.c(),a.m(e,l)):a&&(a.d(1),a=null),c&1&&(s=f[0]&&typeof f[0]=="object"&&Object.keys(f[0]).length>0),s?r?(r.p(f,c),c&1&&B(r,1)):(r=ut(f),r.c(),B(r,1),r.m(t,null)):r&&(fe(),U(r,1,1,()=>{r=null}),ue())},i(f){n||(B(r),n=!0)},o(f){U(r),n=!1},d(f){f&&p(e),a&&a.d(),r&&r.d(),i[18](null)}}}function Pl(i){let e=document.querySelector(`#col_${i}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function Sl(i,e){return e.filter(l=>!i.some(t=>t.target===l.target||t.id===l.target))}function Tl(i,e,l){let t,s=j,n=()=>(s(),s=We(d,T=>l(20,t=T)),d),a;ie(i,de,T=>l(21,a=T)),i.$$.on_destroy.push(()=>s());let{category:r}=e,{data:f}=e,{newData:c}=e,{dataLen:u}=e,{entities:o}=e,{updatePosition:d}=e;n();let{index:_}=e,{loadData:y}=e,{defaultNodes:S}=e,{batchSize:q}=e,{essaysItems:D}=e,{site:M}=e,h,g,v={nodes:[],links:[]};async function I(T,X){Pl(X),l(8,g=!0),a.splice(X,a.length-X);let Z=a.map(w=>w.data).flat();const V=await(await fetch(T.target)).json();if(V!=null&&V["o:items"]&&a.length==1){let w=[];const A=V["o:items"]["@id"];(await(await fetch(A)).json()).forEach(te=>{w.push(te)});let R=w.map(te=>({"o:title":te["o:title"],"@id":te["@id"],thumbnail_display_urls:te.thumbnail_display_urls}));V.related={...R}}v=await Bt([{data:V}]);let ee=v.links.filter(w=>w.source===T.target||w.target===T.target),b=Sl([...S,...Z],ee),k=ee.slice(0,q);se(de,a[X]={id:T.target,data:ee.sort((w,A)=>{if(w.property)return w.property.localeCompare(A.property)}),page:0,new:b,paginate:k},a),l(8,g=!1),b.length>0&&y(k,q),se(d,t=!0,t)}const E=(T,X)=>(X==null?void 0:X.title)===T.title,L=T=>{I(T,_+1)},G=T=>{I(T,_+1)};function F(T){Se[T?"unshift":"push"](()=>{h=T,l(7,h)})}return i.$$set=T=>{"category"in T&&l(10,r=T.category),"data"in T&&l(0,f=T.data),"newData"in T&&l(1,c=T.newData),"dataLen"in T&&l(11,u=T.dataLen),"entities"in T&&l(2,o=T.entities),"updatePosition"in T&&n(l(3,d=T.updatePosition)),"index"in T&&l(4,_=T.index),"loadData"in T&&l(12,y=T.loadData),"defaultNodes"in T&&l(13,S=T.defaultNodes),"batchSize"in T&&l(14,q=T.batchSize),"essaysItems"in T&&l(5,D=T.essaysItems),"site"in T&&l(6,M=T.site)},[f,c,o,d,_,D,M,h,g,I,r,u,y,S,q,E,L,G,F]}class Ft extends Te{constructor(e){super(),De(this,e,Tl,El,Le,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function _t(i,e,l){const t=i.slice();return t[32]=e[l],t[34]=l,t}function Ye(i){const e=i.slice(),l=e[32].paginate.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property)));e[35]=l;const t=e[32].data.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property))).length;return e[36]=t,e}function ht(i,e,l){const t=i.slice();t[37]=e[l];const s=t[32].paginate.filter(function(...r){return i[20](t[37],...r)});t[38]=s;const n=t[32].data.filter(function(...r){return i[21](t[37],...r)}).length;return t[36]=n,t}function Dl(i){let e,l,t=i[5],s=[];for(let a=0;a<t.length;a+=1)s[a]=kt(_t(i,t,a));const n=a=>U(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=W()},l(a){for(let r=0;r<s.length;r+=1)s[r].l(a);e=W()},m(a,r){for(let f=0;f<s.length;f+=1)s[f].m(a,r);P(a,e,r),l=!0},p(a,r){if(r[0]&16063){t=a[5];let f;for(f=0;f<t.length;f+=1){const c=_t(a,t,f);s[f]?(s[f].p(c,r),B(s[f],1)):(s[f]=kt(c),s[f].c(),B(s[f],1),s[f].m(e.parentNode,e))}for(fe(),f=t.length;f<s.length;f+=1)n(f);ue()}},i(a){if(!l){for(let r=0;r<t.length;r+=1)B(s[r]);l=!0}},o(a){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)U(s[r]);l=!1},d(a){Oe(s,a),a&&p(e)}}}function Ll(i){let e,l,t;return{c(){e=N("div"),l=N("h4"),t=$("Loading Graph..."),this.h()},l(s){e=z(s,"DIV",{});var n=C(e);l=z(n,"H4",{class:!0});var a=C(l);t=x(a,"Loading Graph..."),a.forEach(p),n.forEach(p),this.h()},h(){m(l,"class","loading svelte-d0zru6")},m(s,n){P(s,e,n),O(e,l),O(l,t)},p:j,i:j,o:j,d(s){s&&p(e)}}}function Nl(i){let e,l;return{c(){e=N("div"),l=$("There are no connections."),this.h()},l(t){e=z(t,"DIV",{class:!0});var s=C(e);l=x(s,"There are no connections."),s.forEach(p),this.h()},h(){m(e,"class","no-items svelte-d0zru6")},m(t,s){P(t,e,s),O(e,l)},p:j,i:j,o:j,d(t){t&&p(e)}}}function zl(i){let e,l,t=i[32].paginate.filter(i[19]).length>0,s,n,a=i[3].mainCategories,r=[];for(let o=0;o<a.length;o+=1)r[o]=pt(ht(i,a,o));const f=o=>U(r[o],1,1,()=>{r[o]=null});let c=t&&gt(Ye(i)),u=i[32].paginate.length<i[32].new.length&&vt(i);return{c(){e=N("div");for(let o=0;o<r.length;o+=1)r[o].c();l=J(),c&&c.c(),s=J(),u&&u.c()},l(o){e=z(o,"DIV",{});var d=C(e);for(let _=0;_<r.length;_+=1)r[_].l(d);l=Y(d),c&&c.l(d),s=Y(d),u&&u.l(d),d.forEach(p)},m(o,d){P(o,e,d);for(let _=0;_<r.length;_+=1)r[_].m(e,null);O(e,l),c&&c.m(e,null),O(e,s),u&&u.m(e,null),n=!0},p(o,d){if(d[0]&7725){a=o[3].mainCategories;let _;for(_=0;_<a.length;_+=1){const y=ht(o,a,_);r[_]?(r[_].p(y,d),B(r[_],1)):(r[_]=pt(y),r[_].c(),B(r[_],1),r[_].m(e,l))}for(fe(),_=a.length;_<r.length;_+=1)f(_);ue()}d[0]&40&&(t=o[32].paginate.filter(o[19]).length>0),t?c?(c.p(Ye(o),d),d[0]&40&&B(c,1)):(c=gt(Ye(o)),c.c(),B(c,1),c.m(e,s)):c&&(fe(),U(c,1,1,()=>{c=null}),ue()),o[32].paginate.length<o[32].new.length?u?u.p(o,d):(u=vt(o),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(o){if(!n){for(let d=0;d<a.length;d+=1)B(r[d]);B(c),n=!0}},o(o){r=r.filter(Boolean);for(let d=0;d<r.length;d+=1)U(r[d]);U(c),n=!1},d(o){o&&p(e),Oe(r,o),c&&c.d(),u&&u.d()}}}function mt(i){let e,l;return e=new Ft({props:{site:i[3].publicSite,essaysItems:i[2],category:i[37].key,data:i[38],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){me(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&8&&(n.category=t[37].key),s[0]&40&&(n.data=t[38]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){be(e,t)}}}function pt(i){let e,l,t=i[38].length>0&&mt(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[38].length>0?t?(t.p(s,n),n[0]&40&&B(t,1)):(t=mt(s),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ue())},i(s){l||(B(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&p(e)}}}function gt(i){let e,l,t=i[35].length>0&&bt(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[35].length>0?t?(t.p(s,n),n[0]&40&&B(t,1)):(t=bt(s),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ue())},i(s){l||(B(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&p(e)}}}function bt(i){let e,l;return e=new Ft({props:{site:i[3].publicSite,essaysItems:i[2],category:"",data:i[35],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){me(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&40&&(n.data=t[35]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){be(e,t)}}}function vt(i){let e,l,t,s;return{c(){e=N("div"),l=$("Load more"),this.h()},l(n){e=z(n,"DIV",{class:!0});var a=C(e);l=x(a,"Load more"),a.forEach(p),this.h()},h(){m(e,"class","more svelte-d0zru6")},m(n,a){P(n,e,a),O(e,l),t||(s=[K(e,"click",function(){Qe(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)}),K(e,"keydown",function(){Qe(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)})],t=!0)},p(n,a){i=n},d(n){n&&p(e),t=!1,Me(s)}}}function kt(i){let e,l,t,s,n,a,r;const f=[zl,Nl],c=[];function u(o,d){var _,y;return(_=o[32])!=null&&_.new&&((y=o[32])==null?void 0:y.new.length)>0?0:1}return l=u(i),t=c[l]=f[l](i),{c(){e=N("div"),t.c(),s=J(),this.h()},l(o){e=z(o,"DIV",{class:!0,id:!0});var d=C(e);t.l(d),s=Y(d),d.forEach(p),this.h()},h(){m(e,"class","links svelte-d0zru6"),m(e,"id","col_"+i[34])},m(o,d){P(o,e,d),c[l].m(e,null),O(e,s),i[22](e),n=!0,a||(r=[K(e,"scroll",i[23]),K(e,"click",i[24]),K(e,"keypress",i[25])],a=!0)},p(o,d){let _=l;l=u(o),l===_?c[l].p(o,d):(fe(),U(c[_],1,1,()=>{c[_]=null}),ue(),t=c[l],t?t.p(o,d):(t=c[l]=f[l](o),t.c()),B(t,1),t.m(e,s))},i(o){n||(B(t),n=!0)},o(o){U(t),n=!1},d(o){o&&p(e),c[l].d(),i[22](null),a=!1,Me(r)}}}function yt(i){let e,l,t,s;return{c(){e=N("div"),l=$("✕"),this.h()},l(n){e=z(n,"DIV",{class:!0});var a=C(e);l=x(a,"✕"),a.forEach(p),this.h()},h(){m(e,"class","close svelte-d0zru6")},m(n,a){P(n,e,a),O(e,l),t||(s=[K(e,"click",i[27]),K(e,"keypress",i[28])],t=!0)},p:j,d(n){n&&p(e),t=!1,Me(s)}}}function Al(i){let e,l,t,s,n,a;const r=[Ll,Dl],f=[];function c(o,d){return o[8].length==0?0:1}l=c(i),t=f[l]=r[l](i);let u=i[5].length>1&&yt(i);return{c(){e=N("div"),t.c(),s=J(),u&&u.c(),n=W(),this.h()},l(o){e=z(o,"DIV",{class:!0});var d=C(e);t.l(d),d.forEach(p),s=Y(o),u&&u.l(o),n=W(),this.h()},h(){m(e,"class","graph svelte-d0zru6")},m(o,d){P(o,e,d),f[l].m(e,null),i[26](e),P(o,s,d),u&&u.m(o,d),P(o,n,d),a=!0},p(o,d){let _=l;l=c(o),l===_?f[l].p(o,d):(fe(),U(f[_],1,1,()=>{f[_]=null}),ue(),t=f[l],t?t.p(o,d):(t=f[l]=r[l](o),t.c()),B(t,1),t.m(e,null)),o[5].length>1?u?u.p(o,d):(u=yt(o),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null)},i(o){a||(B(t),a=!0)},o(o){U(t),a=!1},d(o){o&&p(e),f[l].d(),i[26](null),o&&p(s),u&&u.d(o),o&&p(n)}}}function ql(i,e,l){const t=l-e;return(i-e)/t*100}function Ml(i,e,l){const t=l-e;return e+t*i/100}function Ol(i,e,l){let t,s,n,a;ie(i,qe,w=>l(30,s=w)),ie(i,de,w=>l(5,n=w));let{updatePosition:r}=e,{handlePosition:f}=e,{data:c}=e,{visibleItemsID:u}=e,{essaysItems:o}=e,{config:d}=e,{items:_}=e,{screenSize:y}=e,S;const q=ve([]);ie(i,q,w=>l(8,a=w));let D=d.batch,M,h=c.nodes.filter(w=>u.includes(w.id));Ke(async()=>{g(c.nodes,D)}),qt(()=>{M.lastElementChild&&y>600&&M.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),f()});async function g(w,A){const Q=w.map(R=>{var re,H;return(((re=R==null?void 0:R.id)==null?void 0:re.split("/"))||((H=R==null?void 0:R.target)==null?void 0:H.split("/"))).slice(-1)[0]}),ne=Math.ceil(Q.length/A);for(let R=0;R<ne;R++){const te=Q.slice(R*A,(R+1)*A);let re=`${d.api}/items?${te.map(ae=>`id[]=${ae}`).join("&")}`,H=await fetch(re),oe=await H.json();q.update(ae=>(ae.includes(...oe)||ae.push(...oe),ae)),oe.length!=te.length&&(re=`${d.api}/media?${te.map(ae=>`id[]=${ae}`).join("&")}`,H=await fetch(re),oe=await H.json(),q.update(ae=>(ae.includes(...oe)||ae.push(...oe),ae)))}}let v;const I=(w,A)=>{var Q,ne,R,te,re;if(A!=null){const H=((Q=n[w])==null?void 0:Q.page)+1||0;se(de,n[w]={...n[w],page:H,paginate:(ne=n[w])==null?void 0:ne.data.slice(0,H*D)},n),(R=n[w])!=null&&R.data&&((te=n[w])==null?void 0:te.paginate.length)!=((re=n[w])==null?void 0:re.data.length)&&g(n[w].paginate.slice(-D),D)}};let E=0;function L(w){var A,Q,ne,R,te,re;if(s){const H=document.querySelectorAll(".links:first-of-type .node");let oe=(A=H==null?void 0:H[E])==null?void 0:A.offsetTop,ae=(Q=H==null?void 0:H[E])==null?void 0:Q.getAttribute("data-id"),he=(ne=H==null?void 0:H[E+1])==null?void 0:ne.offsetTop,ke=(R=H==null?void 0:H[E+1])==null?void 0:R.getAttribute("data-id"),ye=(te=document.querySelector(`.node-highlite[data-id="${ae}"]`))==null?void 0:te.offsetTop,Ie=(re=document.querySelector(`.node-highlite[data-id="${ke}"]`))==null?void 0:re.offsetTop,Ce=ql(w,oe,he),Ne=Ml(Ce,ye,Ie);const we=document.querySelector(".markdown__container");w>he&&E++,w<oe&&E!=0&&E--,we&&Ne&&oe!==he&&Ne>0&&(we==null||we.scrollTo({top:Ne}))}}const G=w=>!d.mainCategories.some(A=>A.props.includes(w.property)),F=(w,A)=>w.props.includes(A.property),T=(w,A)=>w.props.includes(A.property);function X(w){Se[w?"unshift":"push"](()=>{v=w,l(7,v)})}const Z=()=>{let w=document.querySelector("#col_0");w.addEventListener("scroll",A=>{l(4,S=w==null?void 0:w.scrollTop)}),f()},le=()=>{f()},V=()=>{f()};function ee(w){Se[w?"unshift":"push"](()=>{M=w,l(6,M)})}const b=()=>{se(de,n=[],n),f()},k=()=>{se(de,n=[],n)};return i.$$set=w=>{"updatePosition"in w&&l(0,r=w.updatePosition),"handlePosition"in w&&l(1,f=w.handlePosition),"data"in w&&l(14,c=w.data),"visibleItemsID"in w&&l(15,u=w.visibleItemsID),"essaysItems"in w&&l(2,o=w.essaysItems),"config"in w&&l(3,d=w.config),"items"in w&&l(16,_=w.items),"screenSize"in w&&l(17,y=w.screenSize)},i.$$.update=()=>{var w;i.$$.dirty[0]&65544&&l(18,t=_.filter(A=>A==null?void 0:A.data).map(A=>{var Q,ne;return{img:(Q=A.data)==null?void 0:Q.thumbnail_display_urls.large,source:`item_${A.id}`,target:`${d.api}/resources/${A.id}`,title:((ne=A.data)==null?void 0:ne["o:title"])||""}})),i.$$.dirty[0]&262176&&(n&&n.length==0||de&&((w=n==null?void 0:n[0])==null?void 0:w.data.length)==0)&&se(de,n[0]={data:t,new:t,page:0,paginate:t},n),i.$$.dirty[0]&16&&L(S)},[r,f,o,d,S,n,M,v,a,q,D,h,g,I,c,u,_,y,t,G,F,T,X,Z,le,V,ee,b,k]}class Cl extends Te{constructor(e){super(),De(this,e,Ol,Al,Le,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function It(i,e,l){const t=i.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function wt(i,e,l){const t=i.slice();return t[6]=e[l],t}function Et(i){let e,l,t=Object.entries(i[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=zt(It(i,t,n));return{c(){e=Ee("svg"),l=Ee("g");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=Pe(n,"svg",{class:!0});var a=C(e);l=Pe(a,"g",{});var r=C(l);for(let f=0;f<s.length;f+=1)s[f].l(r);r.forEach(p),a.forEach(p),this.h()},h(){m(e,"class","svelte-1ddz0y9")},m(n,a){P(n,e,a),O(e,l);for(let r=0;r<s.length;r+=1)s[r].m(l,null)},p(n,a){if(a&3){t=Object.entries(n[0]);let r;for(r=0;r<t.length;r+=1){const f=It(n,t,r);s[r]?s[r].p(f,a):(s[r]=zt(f),s[r].c(),s[r].m(l,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(n){n&&p(e),Oe(s,n)}}}function Pt(i){let e,l,t=i[6].label+"",s,n,a,r,f,c,u,o,d=i[6].label+"",_,y,S,q,D,M,h=i[6].reverse&&i[6].label&&St(),g=!i[6].reverse&&i[6].label&&Tt(),v=i[6].reverse&&i[6].label&&Dt(),I=!i[6].reverse&&i[6].label&&Lt();return{c(){e=Ee("text"),l=Ee("textPath"),s=$(t),h&&h.c(),n=W(),g&&g.c(),u=Ee("text"),o=Ee("textPath"),_=$(d),v&&v.c(),y=W(),I&&I.c(),this.h()},l(E){e=Pe(E,"text",{class:!0,source:!0,target:!0});var L=C(e);l=Pe(L,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var G=C(l);s=x(G,t),h&&h.l(G),n=W(),g&&g.l(G),G.forEach(p),L.forEach(p),u=Pe(E,"text",{class:!0,source:!0,target:!0});var F=C(u);o=Pe(F,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var T=C(o);_=x(T,d),v&&v.l(T),y=W(),I&&I.l(T),T.forEach(p),F.forEach(p),this.h()},h(){m(l,"alignment-baseline","middle"),m(l,"href",a="#path_"+i[2]),m(l,"startOffset","99%"),m(l,"text-anchor","end"),m(e,"class",r="background "+i[6].class+" svelte-1ddz0y9"),m(e,"source",f=i[6].datum.source),m(e,"target",c=i[6].datum.target),m(o,"alignment-baseline","middle"),m(o,"href",S="#path_"+i[2]),m(o,"startOffset","99%"),m(o,"text-anchor","end"),m(u,"class",q=He(i[6].class)+" svelte-1ddz0y9"),m(u,"source",D=i[6].datum.source),m(u,"target",M=i[6].datum.target)},m(E,L){P(E,e,L),O(e,l),O(l,s),h&&h.m(l,null),O(l,n),g&&g.m(l,null),P(E,u,L),O(u,o),O(o,_),v&&v.m(o,null),O(o,y),I&&I.m(o,null)},p(E,L){L&1&&t!==(t=E[6].label+"")&&_e(s,t),E[6].reverse&&E[6].label?h||(h=St(),h.c(),h.m(l,n)):h&&(h.d(1),h=null),!E[6].reverse&&E[6].label?g||(g=Tt(),g.c(),g.m(l,null)):g&&(g.d(1),g=null),L&1&&a!==(a="#path_"+E[2])&&m(l,"href",a),L&1&&r!==(r="background "+E[6].class+" svelte-1ddz0y9")&&m(e,"class",r),L&1&&f!==(f=E[6].datum.source)&&m(e,"source",f),L&1&&c!==(c=E[6].datum.target)&&m(e,"target",c),L&1&&d!==(d=E[6].label+"")&&_e(_,d),E[6].reverse&&E[6].label?v||(v=Dt(),v.c(),v.m(o,y)):v&&(v.d(1),v=null),!E[6].reverse&&E[6].label?I||(I=Lt(),I.c(),I.m(o,null)):I&&(I.d(1),I=null),L&1&&S!==(S="#path_"+E[2])&&m(o,"href",S),L&1&&q!==(q=He(E[6].class)+" svelte-1ddz0y9")&&m(u,"class",q),L&1&&D!==(D=E[6].datum.source)&&m(u,"source",D),L&1&&M!==(M=E[6].datum.target)&&m(u,"target",M)},d(E){E&&p(e),h&&h.d(),g&&g.d(),E&&p(u),v&&v.d(),I&&I.d()}}}function St(i){let e;return{c(){e=$(" -")},l(l){e=x(l," -")},m(l,t){P(l,e,t)},d(l){l&&p(e)}}}function Tt(i){let e;return{c(){e=$("→")},l(l){e=x(l,"→")},m(l,t){P(l,e,t)},d(l){l&&p(e)}}}function Dt(i){let e;return{c(){e=$("←")},l(l){e=x(l,"←")},m(l,t){P(l,e,t)},d(l){l&&p(e)}}}function Lt(i){let e;return{c(){e=$("→")},l(l){e=x(l,"→")},m(l,t){P(l,e,t)},d(l){l&&p(e)}}}function Nt(i){let e,l,t,s,n,a,r=(i[1]==i[6].datum.source&&i[6].selected!="not-selected"||i[1]==i[6].datum.target)&&Pt(i);return{c(){e=Ee("path"),r&&r.c(),a=W(),this.h()},l(f){e=Pe(f,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),C(e).forEach(p),r&&r.l(f),a=W(),this.h()},h(){m(e,"id",l="path_"+i[2]),m(e,"class",t=He(i[6].class)+" svelte-1ddz0y9"),m(e,"data-attr",s=i[6].selected),m(e,"d",n=i[6].d)},m(f,c){P(f,e,c),r&&r.m(f,c),P(f,a,c)},p(f,c){c&1&&l!==(l="path_"+f[2])&&m(e,"id",l),c&1&&t!==(t=He(f[6].class)+" svelte-1ddz0y9")&&m(e,"class",t),c&1&&s!==(s=f[6].selected)&&m(e,"data-attr",s),c&1&&n!==(n=f[6].d)&&m(e,"d",n),f[1]==f[6].datum.source&&f[6].selected!="not-selected"||f[1]==f[6].datum.target?r?r.p(f,c):(r=Pt(f),r.c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},d(f){f&&p(e),r&&r.d(f),f&&p(a)}}}function zt(i){let e,l=i[3],t=[];for(let s=0;s<l.length;s+=1)t[s]=Nt(wt(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let a=0;a<t.length;a+=1)t[a].m(s,n);P(s,e,n)},p(s,n){if(n&3){l=s[3];let a;for(a=0;a<l.length;a+=1){const r=wt(s,l,a);t[a]?t[a].p(r,n):(t[a]=Nt(r),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(s){Oe(t,s),s&&p(e)}}}function Vl(i){let e=Object.keys(i[0]).length>0,l,t=e&&Et(i);return{c(){t&&t.c(),l=W()},l(s){t&&t.l(s),l=W()},m(s,n){t&&t.m(s,n),P(s,l,n)},p(s,[n]){n&1&&(e=Object.keys(s[0]).length>0),e?t?t.p(s,n):(t=Et(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:j,o:j,d(s){t&&t.d(s),s&&p(l)}}}function Bl(i,e,l){let t,s;return ie(i,Ge,n=>l(0,t=n)),ie(i,Je,n=>l(1,s=n)),[t,s]}class Fl extends Te{constructor(e){super(),De(this,e,Bl,Vl,Le,{})}}function Gl(i){let e,l,t,s,n,a,r,f,c,u,o;return t=new al({props:{data:i[2],items:i[4],scrollTopVal:i[8]}}),a=new Cl({props:{items:i[4],data:i[10],screenSize:i[0],essaysItems:i[6],visibleItemsID:i[5],handlePosition:i[14],updatePosition:i[13],config:Yt}}),f=new Fl({}),{c(){e=N("article"),l=N("section"),me(t.$$.fragment),s=J(),n=N("section"),me(a.$$.fragment),r=J(),me(f.$$.fragment),this.h()},l(d){e=z(d,"ARTICLE",{style:!0,class:!0});var _=C(e);l=z(_,"SECTION",{class:!0});var y=C(l);pe(t.$$.fragment,y),y.forEach(p),s=Y(_),n=z(_,"SECTION",{class:!0});var S=C(n);pe(a.$$.fragment,S),S.forEach(p),r=Y(_),pe(f.$$.fragment,_),_.forEach(p),this.h()},h(){var d;m(l,"class","markdown__container svelte-15zdm0q"),m(n,"class","graph__container svelte-15zdm0q"),$e(e,"--theme-color",((d=i[2].meta)==null?void 0:d.color)||"blue"),m(e,"class","svelte-15zdm0q")},m(d,_){P(d,e,_),O(e,l),ge(t,l,null),i[19](l),O(e,s),O(e,n),ge(a,n,null),O(e,r),ge(f,e,null),i[26](e),c=!0,u||(o=[K(l,"wheel",i[20],{passive:!0}),K(l,"scroll",i[21]),K(n,"wheel",i[22],{passive:!0}),K(e,"resize",i[14]),K(e,"scroll",i[23]),K(e,"touchmove",i[24],{passive:!0}),K(e,"click",i[25]),K(e,"keypress",i[17])],u=!0)},p(d,_){var q;const y={};_&4&&(y.data=d[2]),_&16&&(y.items=d[4]),_&256&&(y.scrollTopVal=d[8]),t.$set(y);const S={};_&16&&(S.items=d[4]),_&1024&&(S.data=d[10]),_&1&&(S.screenSize=d[0]),_&64&&(S.essaysItems=d[6]),_&32&&(S.visibleItemsID=d[5]),a.$set(S),(!c||_&4)&&$e(e,"--theme-color",((q=d[2].meta)==null?void 0:q.color)||"blue")},i(d){c||(B(t.$$.fragment,d),B(a.$$.fragment,d),B(f.$$.fragment,d),c=!0)},o(d){U(t.$$.fragment,d),U(a.$$.fragment,d),U(f.$$.fragment,d),c=!1},d(d){d&&p(e),be(t),i[19](null),be(a),be(f),i[26](null),u=!1,Me(o)}}}function Ul(i){let e,l,t,s;return{c(){e=N("article"),l=N("section"),t=N("h4"),s=$("Loading..."),this.h()},l(n){e=z(n,"ARTICLE",{class:!0});var a=C(e);l=z(a,"SECTION",{class:!0});var r=C(l);t=z(r,"H4",{});var f=C(t);s=x(f,"Loading..."),f.forEach(p),r.forEach(p),a.forEach(p),this.h()},h(){m(l,"class","short_text svelte-15zdm0q"),m(e,"class","svelte-15zdm0q")},m(n,a){P(n,e,a),O(e,l),O(l,t),O(t,s)},p:j,i:j,o:j,d(n){n&&p(e)}}}function Wl(i){let e,l,t,s;return{c(){e=N("article"),l=N("section"),t=N("h4"),s=$("404 Page not found"),this.h()},l(n){e=z(n,"ARTICLE",{class:!0});var a=C(e);l=z(a,"SECTION",{class:!0});var r=C(l);t=z(r,"H4",{});var f=C(t);s=x(f,"404 Page not found"),f.forEach(p),r.forEach(p),a.forEach(p),this.h()},h(){m(l,"class","short_text svelte-15zdm0q"),m(e,"class","svelte-15zdm0q")},m(n,a){P(n,e,a),O(e,l),O(l,t),O(t,s)},p:j,i:j,o:j,d(n){n&&p(e)}}}function At(i){var V,ee;let e,l,t,s,n,a,r,f,c,u,o,d,_,y,S,q,D,M,h,g,v,I,E,L,G,F,T,X,Z,le;return document.title=e=((ee=(V=i[2])==null?void 0:V.meta)==null?void 0:ee.title)||ze,{c(){l=J(),t=N("meta"),n=J(),a=N("meta"),f=J(),c=N("meta"),o=J(),d=N("meta"),y=J(),S=N("meta"),D=J(),M=N("meta"),h=J(),g=N("meta"),I=J(),E=N("meta"),G=J(),F=N("meta"),X=J(),Z=N("meta"),this.h()},l(b){l=Y(b),t=z(b,"META",{name:!0,content:!0}),n=Y(b),a=z(b,"META",{property:!0,content:!0}),f=Y(b),c=z(b,"META",{property:!0,content:!0}),o=Y(b),d=z(b,"META",{property:!0,content:!0}),y=Y(b),S=z(b,"META",{property:!0,content:!0}),D=Y(b),M=z(b,"META",{name:!0,content:!0}),h=Y(b),g=z(b,"META",{property:!0,content:!0}),I=Y(b),E=z(b,"META",{name:!0,content:!0}),G=Y(b),F=z(b,"META",{name:!0,content:!0}),X=Y(b),Z=z(b,"META",{name:!0,content:!0}),this.h()},h(){var b,k,w,A,Q,ne,R,te,re,H,oe,ae,he,ke,ye,Ie;m(t,"name","description"),m(t,"content",s=((k=(b=i[2])==null?void 0:b.meta)==null?void 0:k.description)||Ae),m(a,"property","og:url"),m(a,"content",r=""+(i[9].url.origin+((w=i[2])==null?void 0:w.path))),m(c,"property","og:title"),m(c,"content",u=((Q=(A=i[2])==null?void 0:A.meta)==null?void 0:Q.title)||ze),m(d,"property","og:description"),m(d,"content",_=((R=(ne=i[2])==null?void 0:ne.meta)==null?void 0:R.description)||Ae),m(S,"property","og:image"),m(S,"content",q=((re=(te=i[2])==null?void 0:te.meta)==null?void 0:re.cover)||Be),m(M,"name","twitter:card"),m(M,"content","summary_large_image"),m(g,"property","twitter:url"),m(g,"content",v=""+(i[9].url.origin+((H=i[2])==null?void 0:H.path))),m(E,"name","twitter:title"),m(E,"content",L=((ae=(oe=i[2])==null?void 0:oe.meta)==null?void 0:ae.title)||ze),m(F,"name","twitter:description"),m(F,"content",T=((ke=(he=i[2])==null?void 0:he.meta)==null?void 0:ke.description)||Ae),m(Z,"name","twitter:image"),m(Z,"content",le=((Ie=(ye=i[2])==null?void 0:ye.meta)==null?void 0:Ie.cover)||Be)},m(b,k){P(b,l,k),P(b,t,k),P(b,n,k),P(b,a,k),P(b,f,k),P(b,c,k),P(b,o,k),P(b,d,k),P(b,y,k),P(b,S,k),P(b,D,k),P(b,M,k),P(b,h,k),P(b,g,k),P(b,I,k),P(b,E,k),P(b,G,k),P(b,F,k),P(b,X,k),P(b,Z,k)},p(b,k){var w,A,Q,ne,R,te,re,H,oe,ae,he,ke,ye,Ie,Ce,Ne,we,je;k&4&&e!==(e=((A=(w=b[2])==null?void 0:w.meta)==null?void 0:A.title)||ze)&&(document.title=e),k&4&&s!==(s=((ne=(Q=b[2])==null?void 0:Q.meta)==null?void 0:ne.description)||Ae)&&m(t,"content",s),k&516&&r!==(r=""+(b[9].url.origin+((R=b[2])==null?void 0:R.path)))&&m(a,"content",r),k&4&&u!==(u=((re=(te=b[2])==null?void 0:te.meta)==null?void 0:re.title)||ze)&&m(c,"content",u),k&4&&_!==(_=((oe=(H=b[2])==null?void 0:H.meta)==null?void 0:oe.description)||Ae)&&m(d,"content",_),k&4&&q!==(q=((he=(ae=b[2])==null?void 0:ae.meta)==null?void 0:he.cover)||Be)&&m(S,"content",q),k&516&&v!==(v=""+(b[9].url.origin+((ke=b[2])==null?void 0:ke.path)))&&m(g,"content",v),k&4&&L!==(L=((Ie=(ye=b[2])==null?void 0:ye.meta)==null?void 0:Ie.title)||ze)&&m(E,"content",L),k&4&&T!==(T=((Ne=(Ce=b[2])==null?void 0:Ce.meta)==null?void 0:Ne.description)||Ae)&&m(F,"content",T),k&4&&le!==(le=((je=(we=b[2])==null?void 0:we.meta)==null?void 0:je.cover)||Be)&&m(Z,"content",le)},d(b){b&&p(l),b&&p(t),b&&p(n),b&&p(a),b&&p(f),b&&p(c),b&&p(o),b&&p(d),b&&p(y),b&&p(S),b&&p(D),b&&p(M),b&&p(h),b&&p(g),b&&p(I),b&&p(E),b&&p(G),b&&p(F),b&&p(X),b&&p(Z)}}}function Xl(i){let e,l,t,s,n,a,r,f;Ut(i[18]);const c=[Wl,Ul,Gl],u=[];function o(_,y){return _[2]==null&&_[3]==null?0:_[3]==null?1:2}l=o(i),t=u[l]=c[l](i);let d=i[2]!=null&&At(i);return{c(){e=N("div"),t.c(),s=J(),d&&d.c(),n=W()},l(_){e=z(_,"DIV",{});var y=C(e);t.l(y),y.forEach(p),s=Y(_);const S=Wt("svelte-7wo7lo",document.head);d&&d.l(S),n=W(),S.forEach(p)},m(_,y){P(_,e,y),u[l].m(e,null),P(_,s,y),d&&d.m(document.head,null),O(document.head,n),a=!0,r||(f=[K(window,"resize",i[14]),K(window,"click",i[14]),K(window,"resize",i[18])],r=!0)},p(_,[y]){let S=l;l=o(_),l===S?u[l].p(_,y):(fe(),U(u[S],1,1,()=>{u[S]=null}),ue(),t=u[l],t?t.p(_,y):(t=u[l]=c[l](_),t.c()),B(t,1),t.m(e,null)),_[2]!=null?d?d.p(_,y):(d=At(_),d.c(),d.m(n.parentNode,n)):d&&(d.d(1),d=null)},i(_){a||(B(t),a=!0)},o(_){U(t),a=!1},d(_){_&&p(e),u[l].d(),_&&p(s),d&&d.d(_),p(n),r=!1,Me(f)}}}function Hl(i,e,l){let t,s,n,a,r,f;ie(i,Zt,V=>l(9,t=V)),ie(i,xe,V=>l(10,s=V)),ie(i,Je,V=>l(16,n=V)),ie(i,Ue,V=>l(11,r=V)),ie(i,qe,V=>l(12,f=V));let{data:c}=e,u,o,d=[],_,y,S=[],q=[],D,M;const h=ve(!1);ie(i,h,V=>l(27,a=V));const g=()=>{se(h,a=!0,a)};Xt(async()=>{l(2,d=[...c.posts].find(V=>V.path.includes(t.params.slug)))}),Ke(async()=>{l(4,y=await bl(d.text)),l(5,S=y.filter(ee=>!ee.set).map(ee=>{var b;return`${ce}/resources/${(b=ee.data)==null?void 0:b["o:id"]}`})),l(3,_=await Bt(y)),se(xe,s=_,s);const V=localStorage.getItem("selectedLanguage");l(6,q=c.posts.reduce((ee,b)=>(!b.path.includes(t.params.slug)&&b.meta.lang==V&&b.links.map(k=>{const w=ee.find(Q=>Q.id===k),A={title:b.meta.title,url:b.path};w?w.essays.some(Q=>Q.title===A.title&&Q.url===A.url)||w.essays.push(A):ee.push({id:k,essays:[A]})}),ee),[]))});function v(V){Fe.call(this,i,V)}function I(){l(0,u=window.innerWidth)}function E(V){Se[V?"unshift":"push"](()=>{o=V,l(1,o)})}const L=()=>{g(),se(qe,f=!1,f),l(8,M=o==null?void 0:o.scrollTop)},G=()=>{u<1e3&&(g(),l(8,M=o==null?void 0:o.scrollTop),se(qe,f=!1,f))},F=()=>{u>1e3&&se(qe,f=!0,f)},T=()=>{se(Ue,r=D==null?void 0:D.scrollLeft,r)},X=()=>{se(Ue,r=D==null?void 0:D.scrollLeft,r),g()},Z=()=>{g()};function le(V){Se[V?"unshift":"push"](()=>{D=V,l(7,D)})}return i.$$set=V=>{"data"in V&&l(15,c=V.data)},i.$$.update=()=>{i.$$.dirty&65536&&g()},[u,o,d,_,y,S,q,D,M,t,s,r,f,h,g,c,n,v,I,E,L,G,F,T,X,Z,le]}class jl extends Te{constructor(e){super(),De(this,e,Hl,Xl,Le,{data:15})}}export{jl as component,Kl as universal};
